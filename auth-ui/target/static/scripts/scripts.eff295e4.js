function encryptByDES(a,b){var c=CryptoJS.enc.Utf8.parse(b),d=CryptoJS.DES.encrypt(a,c,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});return d.toString()}function SetAlertFunction(a){$_$XTXAlert=a}function $checkBrowserISIE(){return!!(window.ActiveXObject||"ActiveXObject"in window)}function $OnUsbKeyChange(){"function"==typeof $_$onUsbKeyChangeCallBackFunc&&$_$onUsbKeyChangeCallBackFunc()}function $AttachIE11OnUSBKeychangeEvent(a){var b=document.createElement("script");b.setAttribute("for",a),b.setAttribute("event","OnUsbKeyChange"),b.appendChild(document.createTextNode("$OnUsbKeyChange()")),document.body.appendChild(b)}function $LoadControl(CLSID,ctlName,testFuncName,addEvent){var pluginDiv=document.getElementById("pluginDiv"+ctlName);if(pluginDiv)return!0;pluginDiv=document.createElement("div"),pluginDiv.id="pluginDiv"+ctlName,document.body.appendChild(pluginDiv);try{if($checkBrowserISIE()){if(pluginDiv.innerHTML='<object id="'+ctlName+'" classid="CLSID:'+CLSID+'" style="HEIGHT:0px; WIDTH:0px"></object>',addEvent){var clt=eval(ctlName);clt.attachEvent?clt.attachEvent("OnUsbKeyChange",$OnUsbKeyChange):$AttachIE11OnUSBKeychangeEvent(ctlName)}}else{var chromeVersion=window.navigator.userAgent.match(/Chrome\/(\d+)\./);if(chromeVersion&&chromeVersion[1]&&parseInt(chromeVersion[1],10)>=42)return document.body.removeChild(pluginDiv),pluginDiv.innerHTML="",pluginDiv=null,!1;addEvent?pluginDiv.innerHTML="<embed id="+ctlName+" type=application/x-xtx-axhost clsid={"+CLSID+"} event_OnUsbkeyChange=$OnUsbKeyChange width=0 height=0 />":pluginDiv.innerHTML="<embed id="+ctlName+" type=application/x-xtx-axhost clsid={"+CLSID+"} width=0 height=0 />"}return null==testFuncName||""==testFuncName||void 0!=eval(ctlName+"."+testFuncName)||(document.body.removeChild(pluginDiv),pluginDiv.innerHTML="",pluginDiv=null,!1)}catch(a){return document.body.removeChild(pluginDiv),pluginDiv.innerHTML="",pluginDiv=null,!1}}function $XTXAlert(a){"function"==typeof $_$XTXAlert?$_$XTXAlert(a):alert(a)}function $myOKRtnFunc(a,b,c){if("function"==typeof b){var d={retVal:a,ctx:c};b(d)}return a}function CreateXTXAppObject(){var a=$LoadControl("3F367B74-92D9-4C5E-AB93-234F8A91D5E6","XTXAPP","SOF_GetVersion()",!0);if(!a)return null;var b=new Object;return b.SOF_GetCertInfoByOid=function(a,b,c,d){var e=XTXAPP.SOF_GetCertInfoByOid(a,b);return $myOKRtnFunc(e,c,d)},b.SOF_GetCertInfo=function(a,b,c,d){var e=XTXAPP.SOF_GetCertInfo(a,b);return $myOKRtnFunc(e,c,d)},b.SOF_GetUserList=function(a,b){var c=XTXAPP.SOF_GetUserList();return $myOKRtnFunc(c,a,b)},b.SOF_SignData=function(a,b,c,d){var e=XTXAPP.SOF_SignData(a,b);return $myOKRtnFunc(e,c,d)},b.SOF_SignFile=function(a,b,c,d){var e=XTXAPP.SOF_SignFile(a,b);return $myOKRtnFunc(e,c,d)},b.SOF_ExportUserCert=function(a,b,c){var d=XTXAPP.SOF_ExportUserCert(a);return $myOKRtnFunc(d,b,c)},b.SOF_Login=function(a,b,c,d){var e=XTXAPP.SOF_Login(a,b);return $myOKRtnFunc(e,c,d)},b.SOF_GetPinRetryCount=function(a,b,c){var d=XTXAPP.SOF_GetPinRetryCount(a);return $myOKRtnFunc(d,b,c)},b}function CreateWebSocketObject(a,b){var c=new Object;return c.ws_obj=null,c.ws_heartbeat_id=0,c.ws_queue_id=0,c.ws_queue_list={},c.ws_queue_ctx={},c.xtx_version="",c.load_websocket=function(){var d="ws://127.0.0.1:21051/xtxapp/";try{window.g_ws&&window.g_ws.close&&window.g_ws.close(),c.ws_obj=new WebSocket(d),window.g_ws=c.ws_obj}catch(a){return console.log(a),!1}return c.ws_queue_list.onUsbkeyChange=$OnUsbKeyChange,c.ws_obj.onopen=function(b){a&&a()},c.ws_obj.onerror=function(a){b&&b()},c.ws_obj.onclose=function(a){},c.ws_obj.onmessage=function(a){var b=JSON.parse(a.data);b["set-cookie"]&&(document.cookie=b["set-cookie"]),b.loginError&&alert(b.loginError);var d=b.call_cmd_id;if(d){var e=c.ws_queue_list[d];if("function"==typeof e){var f=c.ws_queue_ctx[b.call_cmd_id];f=f||{returnType:"string"};var g;g="bool"==f.returnType?"true"==b.retVal:"number"==f.returnType?Number(b.retVal):b.retVal;var h={retVal:g,ctx:f};e(h),"onUsbkeyChange"!=b.call_cmd_id&&delete c.ws_queue_list[b.call_cmd_id],delete c.ws_queue_ctx[b.call_cmd_id]}}},!0},c.sendMessage=function(a){c.ws_obj.readyState==WebSocket.OPEN?c.ws_obj.send(JSON.stringify(a)):(setTimeout(function(){if(a.count){if(a.count++,4===a.count)return}else a.count=1;c.sendMessage(a)},500),console.log("Can't connect to WebSocket server!"))},c.callMethod=function(a,b,d,e,f){c.ws_queue_id++,"function"==typeof b&&(c.ws_queue_list["i_"+c.ws_queue_id]=b,d=d||{},d.returnType=e,c.ws_queue_ctx["i_"+c.ws_queue_id]=d);var g={};g.cookie=document.cookie,g.xtx_func_name=a,g.call_cmd_id="i_"+c.ws_queue_id,arguments.length>4&&(g.param=f),c.sendMessage(g)},c.SOF_GetCertInfoByOid=function(a,b,d,e){var f=[a,b];c.callMethod("SOF_GetCertInfoByOid",d,e,"string",f)},c.SOF_GetCertInfo=function(a,b,d,e){var f=[a,b];c.callMethod("SOF_GetCertInfo",d,e,"string",f)},c.SOF_GetUserList=function(a,b){var d=[];c.callMethod("SOF_GetUserList",a,b,"string",d)},c.SOF_SignData=function(a,b,d,e){var f=[a,b];c.callMethod("SOF_SignData",d,e,"string",f)},c.SOF_SignFile=function(a,b,d,e){var f=[a,b];c.callMethod("SOF_SignFile",d,e,"string",f)},c.SOF_ExportUserCert=function(a,b,d){var e=[a];c.callMethod("SOF_ExportUserCert",b,d,"string",e)},c.SOF_Login=function(a,b,d,e){var f=[a,b];c.callMethod("SOF_Login",d,e,"bool",f)},c.SOF_GetPinRetryCount=function(a,b,d){var e=[a];c.callMethod("SOF_GetPinRetryCount",b,d,"number",e)},c.load_websocket()?c:null}function getCertData(a){var b=ReadCertData(1,a);return 0==b?"":b}function trim(a,b){var c;return c=a.replace(/(^\s+)|(\s+$)/g,""),"g"==b.toLowerCase()&&(c=c.replace(/\s/g,"")),c}function utf16to8(a){var b,c,d,e;for(b="",d=a.length,c=0;c<d;c++)e=a.charCodeAt(c),e>=1&&e<=127?b+=a.charAt(c):e>2047?(b+=String.fromCharCode(224|e>>12&15),b+=String.fromCharCode(128|e>>6&63),b+=String.fromCharCode(128|e>>0&63)):(b+=String.fromCharCode(192|e>>6&31),b+=String.fromCharCode(128|e>>0&63));return b}function utf8to16(a){var b,c,d,e,f,g;for(b="",d=a.length,c=0;c<d;)switch(e=a.charCodeAt(c++),e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:f=a.charCodeAt(c++),b+=String.fromCharCode((31&e)<<6|63&f);break;case 14:f=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((15&e)<<12|(63&f)<<6|(63&g)<<0)}return b}function base64encode(a){var b,c,d,e,f,g;for(d=a.length,c=0,b="";c<d;){if(e=255&a.charCodeAt(c++),c==d){b+=base64EncodeChars.charAt(e>>2),b+=base64EncodeChars.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=base64EncodeChars.charAt(e>>2),b+=base64EncodeChars.charAt((3&e)<<4|(240&f)>>4),b+=base64EncodeChars.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=base64EncodeChars.charAt(e>>2),b+=base64EncodeChars.charAt((3&e)<<4|(240&f)>>4),b+=base64EncodeChars.charAt((15&f)<<2|(192&g)>>6),b+=base64EncodeChars.charAt(63&g)}return b}function base64decode(a){var b,c,d,e,f,g,h;for(g=a.length,f=0,h="";f<g;){do b=base64DecodeChars[255&a.charCodeAt(f++)];while(f<g&&b==-1);if(b==-1)break;do c=base64DecodeChars[255&a.charCodeAt(f++)];while(f<g&&c==-1);if(c==-1)break;h+=String.fromCharCode(b<<2|(48&c)>>4);do{if(d=255&a.charCodeAt(f++),61==d)return h;d=base64DecodeChars[d]}while(f<g&&d==-1);if(d==-1)break;h+=String.fromCharCode((15&c)<<4|(60&d)>>2);do{if(e=255&a.charCodeAt(f++),61==e)return h;e=base64DecodeChars[e]}while(f<g&&e==-1);if(e==-1)break;h+=String.fromCharCode((3&d)<<6|e)}return h}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}function setCookie(a,b){var c=1,d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+d.toGMTString()}function getRandSeesionKey(){for(var a="",b=1;b<=32;b++){var c=Math.floor(16*Math.random()).toString(16);a+=c}return a}function delCookie(a){var b=new Date;b.setTime(b.getTime()-1);var c=getCookie(a);null!=c&&(document.cookie=a+"="+c+";expires="+b.toGMTString())}function JsonFlag(data){if("undefined"!=data){var jsondata=eval("("+data+")");return"true"==jsondata.result}return!1}function JsonData(data){if("undefined"!=data){var jsondata=eval("("+data+")");return"true"==jsondata.result?jsondata.Data1:""}return""}function isIE(){var a=/msie/.test(navigator.userAgent.toLowerCase())||/rv:\d+\.0\S+\s+like\sgecko/.test(navigator.userAgent.toLowerCase());return!!a}function Connect(ConnectName){var Mes=!1;try{if(isIE())Mes=WGUKey.ConnectUK(ConnectName);else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.ConnectUK(ConnectName,currentSessionKey),jsonB=eval("("+b+")");"true"==jsonB.result&&(Mes=!0)}}catch(a){return"err"}return Mes}function GetCertInfo(CertFlag,DataFlag,ContainerName){if(isIE()){var res=WGUKey.UKGetUkeyCertInfo(CertFlag,DataFlag,ContainerName);if(1==res)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.UKGetUkeyCertInfo(CertFlag,DataFlag,ContainerName,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return utf8to16(base64decode(jsonB.Data1))}return!1}function ReadCertData(CertFlag,ContainerName){if(isIE()){var res=WGUKey.UKReadCertData(CertFlag,ContainerName);if(1==res)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.UKReadCertData(CertFlag,ContainerName,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return jsonB.Data1}return!1}function SignData(ContainerName,InData){var Mes=!1;if(isIE()){if(Mes=WGUKey.UKSignData(ContainerName,InData),1==Mes)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey)),InData=base64encode(utf16to8(InData));var b=WallGreatUKey.UKSignData(ContainerName,InData,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return jsonB.Data1}return!1}function VerifyData(SignCert,InData,SignData){var Mes=!1;if(isIE())Mes=WGUKey.UKVerifyData(SignCert,InData,SignData,0);else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey)),InData=base64encode(utf16to8(InData));var b=WallGreatUKey.UKVerifyData(SignCert,InData,SignData,0,currentSessionKey),jsonB=eval("("+b+")");"true"==jsonB.result&&(Mes=!0)}return Mes}function SignFile(ContainerName,FilePath){var Mes=!1;if(isIE()){if(Mes=WGUKey.UKSignFileData(ContainerName,FilePath),1==Mes)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey)),FilePath=base64encode(utf16to8(FilePath));var b=WallGreatUKey.UKSignFileData(ContainerName,FilePath,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return jsonB.Data1}return!1}function VerifyFile(SignCert,FilePath,SignData){var Mes=!1;if(isIE())Mes=WGUKey.UKVerifyFileData(SignCert,FilePath,SignData,0);else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey)),FilePath=base64encode(utf16to8(FilePath));var b=WallGreatUKey.UKVerifyFileData(SignCert,FilePath,SignData,0,currentSessionKey),jsonB=eval("("+b+")");"true"==jsonB.result&&(Mes=!0)}return Mes}function ExportSM2Key(CertFlag,ContainerName){if(isIE()){var res=WGUKey.UKExportSM2Key(CertFlag,ContainerName);if(1==res)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.UKExportSM2Key(CertFlag,ContainerName,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return jsonB.Data1}return!1}function ExportRSAKey(CertFlag,ContainerName){if(isIE()){var res=WGUKey.UKExportRSAKey(CertFlag,ContainerName);if(1==res)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.UKExportRSAKey(CertFlag,ContainerName,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return jsonB.Data1}return!1}function GetCertExtensions(CertData,ExtnsID){if(isIE()){var res=WGUKey.UKGetCertExtensions(CertData,ExtnsID);if(1==res)return WGUKey.Data1}else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.UKGetCertExtensions(CertData,ExtnsID,currentSessionKey),jsonB=eval("("+b+")");if("true"==jsonB.result)return utf8to16(base64decode(jsonB.Data1))}return!1}function verifyUPin(szPin){var Mes=!1;if(isIE())Mes=WGUKey.UKVerifyPin(szPin),0==Mes&&(Mes=WGUKey.Data1);else{var currentSessionKey=getCookie("SessionKey");""!=currentSessionKey&&null!=currentSessionKey||(currentSessionKey=getRandSeesionKey(),setCookie("SessionKey",currentSessionKey));var b=WallGreatUKey.UKVerifyPin(szPin,currentSessionKey),jsonB=eval("("+b+")");Mes="true"==jsonB.result||utf8to16(base64decode(jsonB.Data1))}return Mes}angular.module("AuthUI",["ngRoute","ngResource","ngAnimate","Validateform","ui.bootstrap","ngCookies","captcha","Directive","xsrfToken","authserver","authserver.enterprise","authserver.ca","authserver.person","authserver.resident","authserver.school","authserver.expert"]),angular.module("authserver.enterprise",[]),angular.module("authserver.ca",[]),angular.module("authserver.person",[]),angular.module("authserver.resident",[]),angular.module("authserver.school",[]),angular.module("authserver.expert",[]),angular.module("AuthUI").config(["girderConfigProvider",function(a){a.baseUrl="/uaa/"}]),angular.module("AuthUI").constant("ALLOW_ACCESS_LIST",{otherwiseRoute:"enterprise",systems:["person","enterprise","ca","siagent","expert","bxenterprise"]}),angular.module("AuthUI").config(["$routeProvider","$locationProvider",function(a,b){a.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/login"}),b.html5Mode(!1)}]),angular.module("AuthUI").run(["$log","$rootScope","$location","ALLOW_ACCESS_LIST",function(a,b,c,d){b.$on("$routeChangeStart",function(a,e,f){if(e.hasOwnProperty("$$route")){var g=d.systems,h=e.$$route.originalPath,i=!1;angular.forEach(g,function(a){1!==h.indexOf(a)&&"/login"!==h||(b.$broadcast("changeSystemFlag",a),i=!0)}),i||(angular.isDefined(f)?c.path(f.$$route.originalPath):c.path("/"))}}),b.$on("$routeChangeSuccess",function(a,c,d){console.log("请求成功：");var e="辽宁省人社网上经办大厅";e="/bxenterpriselogin"===c.$$route.originalPath?"本溪市养老保障公共服务平台":"辽宁省人社网上经办大厅",b.$watch("title",function(){document.title=e})})}]),angular.module("AuthUI").provider("girderConfig",{baseUrl:"please config baseUrl before use this frameWork",$get:[function(){var a={baseUrl:this.baseUrl};return a}]}),angular.module("AuthUI").controller("ApplicationController",["$log","$scope","ALLOW_ACCESS_LIST",function(a,b,c){var d=window.location.href;b.areaCode=d.substring(d.length-6,d.length),console.log("areaCode",b.areaCode),d.indexOf("person")!==-1?b.areaName="个人登录":"210500"==b.areaCode?b.areaName="虚拟单位":b.areaName="原账号密码",b.loadApp=function(){a.info("应用程序初始化开始.."),b.systemFlag=c.otherwiseRoute},b.$on("changeSystemFlag",function(a,c){b.systemFlag=c}),b.getSystemIconClass=function(){return"L_cen_left_"+b.systemFlag}}]),angular.module("authserver",[]).controller("LoginCtrl",["$log","$scope","$location","ALLOW_ACCESS_LIST",function(a,b,c,d){var e=!0;angular.forEach(d.systems,function(a){e&&c.absUrl().indexOf(a)!=-1&&(c.path("/"+a+"login"),e=!1)}),e&&c.path("/"+d.otherwiseRoute+"login")}]),angular.module("xsrfToken",[]).factory("XSRFTokenService",["$log","$resource","girderConfig","$http",function(a,b,c,d){var e=c.baseUrl+"prevent/token ",f={};return f.getXsrfToken=function(){return d({method:"GET",url:e})},f}]),angular.module("captcha",[]).factory("CaptchaService",["$log","$resource","girderConfig",function(a,b,c){var d=c.baseUrl+"captcha/img",e=b(d,{},{getCaptcha:{method:"GET",url:d,isArray:!1}});e.prototype.getImageUrl=function(){return d+"/"+this.id};var f={};return f.getNextCaptcha=function(){return e.getCaptcha()},f}]),angular.module("Directive",[]).directive("girderValidPassword",function(){return{restrict:"A",require:"ngModel",scope:{reference:"=girderValidPassword"},link:function(a,b,c,d){d.$parsers.unshift(function(b){""===b?d.$setValidity("_required",!1):d.$setValidity("_required",!0);var c=b!==a.reference;d.$setValidity("notEqual",!c)}),a.$watch("reference",function(a){d.$setValidity("notEqual",a===d.$viewValue)})}}}),angular.module("Validateform",[]).factory("IDCard",[function(){var a={};return a.validateIDCard=function(a){function b(a){var b=/(^\d{17}(\d|X)$)/;return b.test(a)!==!1}function c(a){var b=a.length;if(18===b){var c=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,e=a.match(c),f=e[2],g=e[3],h=e[4],i=new Date(f+"/"+g+"/"+h);return d(f,g,h,i)}return!1}function d(a,b,c,d){var e=new Date,f=e.getFullYear();if(d.getFullYear()===parseInt(a,10)&&d.getMonth()+1===parseInt(b,10)&&d.getDate()===parseInt(c,10)){var g=f-a;return g>=1&&g<=100}return!1}function e(a){var b=a.length;if(18===b){var c,d,e=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),f=new Array("1","0","X","9","8","7","6","5","4","3","2"),g=0;for(c=0;c<17;c++)g+=a.substr(c,1)*e[c];return d=f[g%11],d===a.substr(17,1)}return!1}var f={isValid:"true",message:""};return 18!==a.length?f={isValid:"false",message:"录入证件号码位数不正确,应为18位"}:b(a)?c(a)?e(a)?f:f={isValid:"false",message:"身份证号码有误,请修改"}:f={isValid:"false",message:"身份证出生日期不正确"}:f={isValid:"false",message:"身份证格式不正确"}},a.getBirthday=function(a){var b=a.substring(6,10),c=a.substring(10,12),d=a.substring(12,14),e=new Date(b,parseInt(c,10)-1,d);return e},a.getSex=function(a){var b=a.substring(16,17);return parseInt(b,10)%2===0?"2":"1"},a}]),angular.module("AuthUI").service("messageService",["$modal",function(a){var b={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"modules/support/template/messageview.html"},c={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(a,b){return a||(a={}),a.backdrop="static",this.show(a,b)},this.show=function(d,e){var f={},g={};return angular.extend(f,b,d),angular.extend(g,c,e),f.controller||(f.controller="messageServiceController"),f.resolve={modalOptions:function(){return g}},a.open(f).result}}]).controller("messageServiceController",["$scope","$modalInstance","modalOptions","$timeout",function(a,b,c,d){if(a.modalOptions=c,a.modalOptions.hasOwnProperty("timeClose")){var e=a.modalOptions.timeClose;e&&d(function(){b.dismiss("cancel")},e)}a.modalOptions.ok=function(a){b.close(a)},a.modalOptions.close=function(){b.dismiss("cancel")}}]).service("messageBox",["messageService",function(a){var b=function(b,c,d){var e={closeButtonText:null,actionButtonText:"确定",headerText:b,bodyText:c,timeClose:d};return a.showModal({},e)};this.showInfo=function(a,c,d){var e=null===a?"消息提示":a;return b(e,c,d)},this.showInfo=function(a,c){return b("消息提示",a,c)},this.showError=function(a,c,d){var e=null===a?"错误提示":a;return b(e,c,d)},this.showError=function(a,c){return b("错误提示",a,c)}}]).service("confirmBox",["messageService",function(a){var b=function(b,c){var d={closeButtonText:"否",actionButtonText:"是",headerText:b,bodyText:c};return a.showModal({},d)};this.showInfo=function(a,c){var d=null===a?"消息提示":a;return b(d,c)},this.showInfo=function(a){return b("消息提示",a)}}]),angular.module("authserver.person").controller("personCtrl",["$rootScope","XSRFTokenService","$scope","$location","$log","personService","CaptchaService","messageBox","$cookies","$cookieStore","girderConfig","$http",function(a,b,c,d,e,f,g,h,i,j,k,l){c.messageBox=h,c.personcredentials={idNum:"",password:"",captchaId:null,captchaWord:null,randrom:""},c.loginSystem=function(a){if(a.$valid){var b="",d={username:c.personcredentials.idNum,password:c.personcredentials.password};angular.forEach(d,function(a,c){b+=c+"="+a+"&"}),b=b.substr(0,b.length-1),l.post(k.baseUrl+"api/person/idandmobile/login",b,{headers:{"Content-Type":"application/x-www-form-urlencoded",captchaWord:c.personcredentials.captchaWord,captchaId:c.personcredentials.captchaId}}).success(function(a){window.location.href=a.redirectUri}).error(function(a){c.persongetCaptcha(),h.showError(a.message)})}},c.persongetCaptcha=function(){g.getNextCaptcha().$promise.then(function(a){c.personcaptchaUrl=a.getImageUrl()+"?"+Math.random(),c.personcredentials.captchaId=a.id})},c.getRedirect=function(){f.getRedirectUrl().$promise.then(function(a){e.debug(a)})},b.getXsrfToken().success(function(a,b,d,e){c.persongetCaptcha(),c.personcredentials.randrom=a.randrom}).error(function(a,b){}),c.addFavorite=function(){e.info("添加到收藏夹");try{window.external.addFavorite("http://public.tj.hrss.gov.cn/personlogin/","六安市社会保险网上")}catch(a){try{window.sidebar.addPanel("天津个人社保申报","http://public.tj.hrss.gov.cn/personlogin/","")}catch(a){c.messageBox.showInfo("抱歉，您所使用的浏览器无法完成此操作。\n\n加入收藏失败，请使用Ctrl+D进行添加\n\n收藏地址：http://public.tj.hrss.gov.cn/personlogin/")}}},c.tellYou=function(){c.messageBox.showInfo("如原手机丢失，请本人携带身份证原件和新手机到社保分中心柜台办理注册手机变更业务。")}}]),angular.module("authserver.person").controller("passwordCtrl",["CaptchaService","XSRFTokenService","$rootScope","$scope","$location","$log","IDCard","personService","messageBox","$http",function(a,b,c,d,e,f,g,h,i,j){d.confirmPassword="";var k,l=null,m=60;window.clearInterval(l),d.messageBox=i,d.captcha={captchaUrl:"",captchaId:"",captchaWord:""},d.MobileInfo={captchaId:"",captchaWord:""},d.passWordResetDetailDTO={newPassword:"",idNumber:""},d.checkCardNum=function(){if(d.idNumber=d.passWordResetDetailDTO.idNumber,void 0===d.idNumber||""===d.idNumber)return!0;"x"===d.idNumber.substring(17)&&(d.passWordResetDetailDTO.idNumber=d.idNumber.substring(0,17)+d.idNumber.substring(17).toLocaleUpperCase());var a=g.validateIDCard(d.passWordResetDetailDTO.idNumber);return d.isValid=a.message,"false"===a.isValid&&(d.messageBox.showInfo(a.message),!0)},d.usernameChanged=function(){return d.pwmobilenumbermsg="",f.info("获取手机号，用户名是",d.passWordResetDetailDTO.name),f.info("获取手机号，证件号是",d.passWordResetDetailDTO.idNumber),null===d.passWordResetDetailDTO.name||void 0===d.passWordResetDetailDTO.name||""===d.passWordResetDetailDTO.name?void f.error("请输入姓名!"):null===d.passWordResetDetailDTO.idNumber||void 0===d.passWordResetDetailDTO.idNumber||""===d.passWordResetDetailDTO.idNumber?void f.error("请输入证件号码!"):void h.mobileNumberGet(d.passWordResetDetailDTO.name,d.passWordResetDetailDTO.idNumber).then(function(a){f.info("手机号码查询成功",a),d.pwmobilenumbermsg="发送到"+a.data.mobilenumber},function(a){f.info("手机号码查询失败",a),a.data.hasOwnProperty("detail")?d.pwmobilenumbermsg=a.data.detail:a.data.hasOwnProperty("message")?d.pwmobilenumbermsg=a.data.message:d.messageBox.showInfo("手机号码查询失败！")})},d.validatePassword=function(){var a=/^[a-zA-Z]{1}.*\d+.*$/;return d.password=d.passWordResetDetailDTO.newPassword,a.test(d.password)},d.resetLoginPassword=function(){d.validateCode()||d.validateProtect()||(d.MobileInfo.captcha=d.passWordResetDetailDTO.captcha,h.restPasswordMethod(d.MobileInfo,d.passWordResetDetailDTO).then(function(){f.info("密码重置成功！"),e.path("/personPassword_View")},function(a){d.getCaptcha(),f.info("密码重置失败",a),a.data.hasOwnProperty("detail")?d.messageBox.showInfo("密码重置失败!"+a.data.detail):a.data.hasOwnProperty("message")?d.messageBox.showInfo("密码重置失败!"+a.data.message):d.messageBox.showInfo("密码重置失败！")}))},d.validateCode=function(){return void 0===d.passWordResetDetailDTO.name||""===d.passWordResetDetailDTO.name||null===d.passWordResetDetailDTO.name?(d.messageBox.showInfo("请输入您的姓名！"),!0):d.resetForm.idNumber.$invalid?(null==d.resetForm.idNumber.$viewValue||""==d.resetForm.idNumber.$viewValue?d.messageBox.showInfo("请输入证件号码！"):d.messageBox.showInfo("请输入正确位数的证件号码！"),!0):!!d.checkCardNum()||(void 0===d.captcha.captchaWord||""===d.captcha.captchaWord)&&(d.messageBox.showInfo("请输入图形验证码！"),!0)},d.validateProtect=function(){return void 0===d.passWordResetDetailDTO.newPassword||6>d.passWordResetDetailDTO.newPassword.length?(null==d.resetForm.newPassword.$viewValue||""==d.resetForm.newPassword.$viewValue?d.messageBox.showInfo("请输入至少6位的密码！"):d.messageBox.showInfo("密码不合法，请修改！"),!0):!(!d.resetForm.confirmpassword.$error._required&&!d.resetForm.confirmpassword.$error.notEqual)&&(null==d.resetForm.confirmpassword.$viewValue||""==d.resetForm.confirmpassword.$viewValue?d.messageBox.showInfo("请输入重复密码！"):d.passWordResetDetailDTO.newPassword!=d.resetForm.confirmpassword.$viewValue?d.messageBox.showInfo("设置密码与重复密码不匹配！"):d.messageBox.showInfo("重复密码有误，请修改！"),!0)},d.getCaptcha=function(){a.getNextCaptcha().$promise.then(function(a){f.info("loginCtrl获取到验证码",a.id),d.captchaUrl=a.getImageUrl()+"?"+Math.random(),d.captcha.captchaId=a.id})},d.getCaptcha(),d.passwordCtrlMessage=function(){d.validateCode()||h.mobileCodePostByName(d.passWordResetDetailDTO.name,d.passWordResetDetailDTO.idNumber,d.captcha).then(function(a){d.pwmobilenumbermsg="发送到"+a.data.mobilenumber,f.info("验证码已经发送"),k=m,angular.element("#btnPSendCode").attr("disabled","true"),angular.element("#btnPSendCode").val(k+"秒后重发"),l=window.setInterval(function(){0==k?(window.clearInterval(l),angular.element("#btnPSendCode").removeAttr("disabled"),angular.element("#btnPSendCode").val("重新发送"),angular.element("#resetMobileNumber").removeAttr("disabled")):(k--,angular.element("#btnPSendCode").val(k+"秒后重发"),angular.element("#resetMobileNumber").attr("disabled","true"))},1e3)},function(a){d.getCaptcha(),a.data.hasOwnProperty("detail")?d.messageBox.showInfo("手机验证码发送失败！"+a.data.detail):a.data.hasOwnProperty("message")?d.messageBox.showInfo(a.data.message):d.messageBox.showInfo("手机验证码发送失败！")})}}]).animation(".P_L_T_input",function(){return{enter:function(a,b){a.css({position:"relative",left:-10,opacity:0}),a.animate({left:0,opacity:1},b)},leave:function(a,b){a.css({position:"relative",left:0,opacity:1}),a.animate({left:-10,opacity:0},b)}}}),angular.module("authserver.person").factory("personService",["$http","$log","$resource","girderConfig",function(a,b,c,d){var e=[],f=d.baseUrl+"ws/password/reset",g=d.baseUrl+"captcha/sm",h=d.baseUrl+"ws/user/person/mobilenumber",i=d.baseUrl+"ws/user/person/web",j=d.baseUrl+"captcha/sm/idnumbername",k=d.baseUrl+"captcha/sm/web/byidnumbername",l=d.baseUrl+"captcha/sm/web/",m=d.baseUrl+"ws/question",n=d.baseUrl+"ws/user/question",o=d.baseUrl+"/idstools/getGssionid";return e.CodePostMethod=function(b,c){return a({method:"POST",url:g,headers:c,data:b})},e.restPasswordMethod=function(b,c){return a({method:"POST",url:f,headers:b,data:c})},e.modifyMobileMethod=function(b,c){return a({method:"PUT",url:h,headers:c,data:b})},e.registePerson=function(b,c){return a({method:"POST",url:i,headers:c,data:b})},e.mobileNumberGet=function(c,d){return b.info("获取手机号",c,d),a({method:"POST",url:j,data:{mobilenumber:"",name:c,idNumber:d}})},e.mobileCodePostByName=function(c,d,e){return b.info("发送验证码",c,d),a({method:"POST",url:k,headers:e,data:{name:c,idNumber:d}})},e.mobileCodePostByphoneNumberxiaowzh=function(c,d){return b.info("发送验证码",c,d),a({method:"POST",url:l+c,headers:d})},e.getQuestionList=function(){return a({method:"GET",url:m})},e.getQuestionListById=function(b){return a({method:"GET",url:n+"/"+b})},e.getRedirectUrl=function(){return a({method:"GET",url:o})},e}]),angular.module("authserver.person").controller("registerCtrl",["CaptchaService","XSRFTokenService","messageBox","$rootScope","$scope","$location","$log","IDCard","personService","$timeout",function(a,b,c,d,e,f,g,h,i,j){e.disableCanbaoSelectRadio=!0,e.isCanbao=[0,1],e.checkBox=null,e.confirmPassword="";var k,l=null,m=60;window.clearInterval(l),e.messageBox=c,e.captcha={captchaUrl:"",captchaId:"",captchaWord:""},e.tjPersonUserDTO={idType:"01",idNumber:"",name:"",password:""},e.goToRegiste=function(){g.info("注册协议的checkbox="+e.checkBox),!1===e.checkBox||null===e.checkBox?e.messageBox.showInfo("您尚未同意协议内容。"):!0===e.checkBox&&f.path("/personRegister")},e.MobileInfo={mobilenumber:"",captchaId:"",captchaWord:""},e.MobileDTO={title:"",content:"",url:"",mobile:"",email:"",webacc:"",name:""},e.checkCardNum=function(){if(e.idNumber=e.tjPersonUserDTO.idNumber,void 0===e.idNumber||""===e.idNumber)return!0;"x"===e.idNumber.substring(17)&&(e.tjPersonUserDTO.idNumber=e.idNumber.substring(0,17)+e.idNumber.substring(17).toLocaleUpperCase());var a=h.validateIDCard(e.tjPersonUserDTO.idNumber);return e.isValid=a.message,"false"===a.isValid&&(e.messageBox.showInfo(a.message),!0)},e.secretQuestion={birth:"",fatherName:"",motherName:""},e.validatePhone=function(){var a=/^1[34578]\d{9}$/;return e.mobilenumber=e.MobileInfo.mobilenumber,a.test(e.mobilenumber)},e.validatePassword=function(){var a=/^[a-zA-Z]{1}.*\d+.*$/;return e.password=e.tjPersonUserDTO.password,a.test(e.password)},e.registeredUser=function(){e.validateCode()||e.validateRegister()||(e.MobileInfo.captchaId=e.captcha.captchaId,e.MobileInfo.captchaWord=e.captcha.captchaWord,console.info("---注册信息1---",e.tjPersonUserDTO),console.info("---注册信息2---",e.MobileInfo),i.registePerson(e.tjPersonUserDTO,e.MobileInfo).then(function(a){f.path("/personRegister_View")},function(a){e.getCaptcha(),g.info("注册失败",a),a.data.hasOwnProperty("detail")?e.messageBox.showInfo("注册失败！"+a.data.detail):a.data.hasOwnProperty("message")?e.messageBox.showInfo("注册失败！"+a.data.message):e.messageBox.showInfo("当前用户注册失败！")}))},e.passwordCtrlMessage=function(){return!e.validateCode()&&void i.mobileCodePostByphoneNumberxiaowzh(e.MobileInfo.mobilenumber,e.captcha).then(function(a){e.pwmobilenumbermsg="发送到"+a.data.errmsg,g.info("验证码已经发送"),k=m,angular.element("#btnPSendCode").attr("disabled","true"),angular.element("#btnPSendCode").val(k+"秒后重发"),l=window.setInterval(function(){0==k?(window.clearInterval(l),angular.element("#btnPSendCode").removeAttr("disabled"),angular.element("#btnPSendCode").val("重新发送"),angular.element("#resetMobileNumber").removeAttr("disabled")):(k--,angular.element("#btnPSendCode").val(k+"秒后重发"),angular.element("#resetMobileNumber").attr("disabled","true"))},1e3)},function(a){e.getCaptcha(),a.data.hasOwnProperty("detail")?e.messageBox.showInfo("手机验证码发送失败！"+a.data.detail):a.data.hasOwnProperty("message")?e.messageBox.showInfo(a.data.message):e.messageBox.showInfo("手机验证码发送失败！")})},e.getCaptcha=function(){a.getNextCaptcha().$promise.then(function(a){g.info("loginCtrl获取到验证码",a.id),e.captchaUrl=a.getImageUrl()+"?"+Math.random(),e.captcha.captchaId=a.id})},e.getCaptcha(),e.sendRegisterMessage=function(){e.validateCode()||(e.MobileDTO.title="个人注册",e.MobileDTO.mobile=e.MobileInfo.mobilenumber,e.MobileDTO.webacc=e.tjPersonUserDTO.idNumber,e.MobileDTO.name=e.tjPersonUserDTO.name,e.BatchMsgDto={msglst:[e.MobileDTO],msgType:"Sms",userType:"PERSON",businessType:"Register",clientType:"PC",systemType:"Person"},i.CodePostMethod(e.BatchMsgDto,e.captcha).then(function(a){200!=a.data.code?(e.getCaptcha(),e.messageBox.showInfo("手机验证码发送失败！"+a.data.errmsg)):(k=m,angular.element("#btnRegisterSendCode").attr("disabled","true"),angular.element("#btnRegisterSendCode").val(k+"秒后重发"),l=window.setInterval(function(){0==k?(window.clearInterval(l),angular.element("#btnRegisterSendCode").removeAttr("disabled"),angular.element("#btnRegisterSendCode").val("重新发送"),angular.element("#registerMobileNumber").removeAttr("disabled")):(k--,angular.element("#btnRegisterSendCode").val(k+"秒后重发"),angular.element("#registerMobileNumber").attr("disabled","true"))},1e3))},function(a){e.getCaptcha(),
a.data.hasOwnProperty("detail")?e.messageBox.showInfo("手机验证码发送失败！"+a.data.detail):a.data.hasOwnProperty("message")?e.messageBox.showInfo(a.data.message):e.messageBox.showInfo("手机验证码发送失败！")}))},e.validateCode=function(){return void 0===e.tjPersonUserDTO.name||1>e.tjPersonUserDTO.name.length?(e.messageBox.showInfo("请输入注册人姓名！"),!0):e.registerForm.idNumber.$invalid?(null==e.registerForm.idNumber.$viewValue||""==e.registerForm.idNumber.$viewValue?e.messageBox.showInfo("请输入证件号码！"):e.messageBox.showInfo("请输入正确位数的证件号码！"),!0):!!e.checkCardNum()||(void 0===e.captcha.captchaWord||""===e.captcha.captchaWord)&&(e.messageBox.showInfo("请输入图形验证码！"),!0)},e.validateRegister=function(){return void 0===e.tjPersonUserDTO.password||6>e.tjPersonUserDTO.password.length?(null==e.registerForm.password.$viewValue||""==e.registerForm.password.$viewValue?e.messageBox.showInfo("请输入至少6位的密码！"):e.messageBox.showInfo("密码不合法，请修改！"),!0):!(!e.registerForm.confirmpassword.$error._required&&!e.registerForm.confirmpassword.$error.notEqual)&&(null==e.registerForm.confirmpassword.$viewValue||""==e.registerForm.confirmpassword.$viewValue?e.messageBox.showInfo("请输入重复密码！"):e.tjPersonUserDTO.password!=e.registerForm.confirmpassword.$viewValue?e.messageBox.showInfo("设置密码与重复密码不匹配！"):e.messageBox.showInfo("重复密码有误，请修改！"),!0)}}]),angular.module("authserver.person").config(["$routeProvider",function(a){a.when("/personlogin",{templateUrl:"modules/person/views/login.html",controller:"personCtrl"}).when("/personAgree",{templateUrl:"modules/person/views/agreement.html",controller:"registerCtrl"}).when("/personRegister",{templateUrl:"modules/person/views/register.html",controller:"registerCtrl"}).when("/personRegister_View",{templateUrl:"modules/person/views/register_view.html"}).when("/personPassword",{templateUrl:"modules/person/views/password.html",controller:"passwordCtrl"}).when("/personPassword_View",{templateUrl:"modules/person/views/password_view.html"})}]),angular.module("authserver.enterprise").controller("enterpriseCtrl",["$rootScope","$scope","$location","$log","CaptchaService","enterpriseService","messageBox","$http","girderConfig","XSRFTokenService",function(a,b,c,d,e,f,g,h,i,j){b.popShow=!1,b.popClose=function(){b.popShow=!1};var k=window.location.href;b.areaCode=k.substring(k.length-6,k.length),"219900"===b.areaCode?b.areaName="虚拟单位":(b.areaName="原账号密码",b.popShow=!0),console.log(b.areaName),b.messageBox=g,b.loginSystem=function(a){console.info("--进来了--");var c="",d={username:b.credentials.username,password:b.credentials.password};angular.forEach(d,function(a,b){c+=b+"="+a+"&"}),console.info("--fd--",c),c=c.substr(0,c.length-1),console.info("--截取后的fd--",c),h.post(i.baseUrl+"api/enterprise/usernamepassword/login",c,{headers:{"Content-Type":"application/x-www-form-urlencoded",captchaWord:b.credentials.captchaWord,captchaId:b.credentials.captchaId,areaCode:b.areaCode}}).success(function(a){console.info("--登录成功后返回值--",a),window.location.href=a.redirectUri}).error(function(a){b.getCaptcha(),g.showError(a.message)})},b.credentials={username:"",taxcode:"",password:"",captchaId:null,captchaWord:null,randrom:""},j.getXsrfToken().success(function(a,c,d,e){b.getCaptcha(),b.credentials.randrom=a.randrom}).error(function(a,b){}),b.getCaptcha=function(){e.getNextCaptcha().$promise.then(function(a){d.info("loginCtrl获取到验证码",a.id),b.captchaUrl=a.getImageUrl()+"?"+Math.random(),b.credentials.captchaId=a.id})},b.checkSignerX=function(a){try{window.location.href=a}catch(a){}}}]),angular.module("authserver.enterprise").factory("enterpriseService",["$http","$log","$resource",function(a,b,c){var d={};return d}]),angular.module("authserver.enterprise").config(["$routeProvider",function(a){a.when("/enterpriselogin",{templateUrl:"modules/enterprise/views/login.html",controller:"enterpriseCtrl"}).when("/bxenterpriselogin",{templateUrl:"modules/enterprise/views/bxlogin.html",controller:"bxenterpriseCtrl"})}]),angular.module("authserver.enterprise").controller("bxenterpriseCtrl",["$rootScope","$scope","$location","$log","CaptchaService","enterpriseService","messageBox","$http","girderConfig","XSRFTokenService",function(a,b,c,d,e,f,g,h,i,j){b.messageBox=g,b.loginSystem=function(a){console.info("--进来了--");var c="",d={username:b.credentials.username,password:b.credentials.password};angular.forEach(d,function(a,b){c+=b+"="+a+"&"}),console.info("--fd--",c),c=c.substr(0,c.length-1),console.info("--截取后的fd--",c),h.post(i.baseUrl+"api/enterprise/usernamepassword/login",c,{headers:{"Content-Type":"application/x-www-form-urlencoded",captchaWord:b.credentials.captchaWord,captchaId:b.credentials.captchaId}}).success(function(a){console.info("--登录成功后返回值--",a),window.location.href=a.redirectUri}).error(function(a){b.getCaptcha(),g.showError(a.message)})},b.credentials={username:"",taxcode:"",password:"",captchaId:null,captchaWord:null,randrom:""},j.getXsrfToken().success(function(a,c,d,e){b.getCaptcha(),b.credentials.randrom=a.randrom}).error(function(a,b){}),b.getCaptcha=function(){e.getNextCaptcha().$promise.then(function(a){d.info("loginCtrl获取到验证码",a.id),b.captchaUrl=a.getImageUrl()+"?"+Math.random(),b.credentials.captchaId=a.id})},b.checkSignerX=function(a){try{window.location.href=a}catch(a){}}}]),angular.module("authserver.ca").controller("caCtrl",["$rootScope","$scope","$location","$log","caService","messageBox","$http","girderConfig","XSRFTokenService","$timeout","$q",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){a.$$phase||a.$root.$$phase?b():a.$apply(b)}b.messageBox=f,b.isSubmit=!1,b.credentials={cellnum:"",password:"",certsOptions:[],selectedOption:{}};var m=null,n="df",o="gx",p=[n,o],q=-1,r=function(a){m=a===n?$NEUCA.DF_API:a===o?$NEUCA.GX_API:null},s=function(a){var c=k.defer();return m.login(b.credentials.selectedOption.certid,b.credentials.password,function(b){d.info("证书密码验证成功"),c.resolve(a)},function(a){b.loginButton="单位证书用户登录",b.isSubmit=!1,d.error("证书密码登录失败",a),b.credentials.password="",f.showError(a.errorMsg)}),c.promise},t=function(a){var c=k.defer();return g.get(h.baseUrl+"ws/ca/randrom/"+a+"?"+Math.random()).success(function(b,d,e,f){console.info("获取随机数成功",b);var g={type:a,randrom:b.randrom};c.resolve(g)}).error(function(a,c,d,e){b.loginButton="单位证书用户登录",b.isSubmit=!1,console.error("获取随机数失败",a),a.hasOwnProperty("detail")?f.showError("获取随机数失败："+a.detail):a.hasOwnProperty("message")?f.showError("获取随机数失败："+a.message):f.showError("获取随机数失败")}),c.promise},u=function(a){var c=k.defer();return m.loadNumber(b.credentials.selectedOption.certid,function(b){a.indata=b[0],c.resolve(a)},function(a){b.loginButton="单位证书用户登录",b.isSubmit=!1,d.error("获取单位编号失败",a,a.errorMsg),f.showError("获取单位编号失败："+a.errorMsg)}),c.promise},v=function(a){var c=k.defer();return m.signData(b.credentials.selectedOption.certid,a.indata+"|||"+a.randrom,function(b){a.signdata=b,c.resolve(a)},function(a){b.loginButton="单位证书用户登录",b.isSubmit=!1,d.error("签名失败",a),f.showError("签名失败，请重试")}),c.promise},w=function(a){var c=k.defer();return m.exportUserCert(b.credentials.selectedOption.certid,function(b){a.certdata=b,c.resolve(a)},function(a){b.loginButton="单位证书用户登录",b.isSubmit=!1,d.error("获取用户证书失败",a),f.showError("获取用户证书失败，请重试")}),c.promise},x=function(a){var c={type:a.type,indata:a.indata,signdata:a.signdata,certdata:a.certdata},d="";angular.forEach(c,function(a,b){d+=b+"="+a+"&"}),d=d.substr(0,d.length-1);var e={headers:{"Content-Type":"application/x-www-form-urlencoded"}};g.post(h.baseUrl+"api/ca/login",d,e).success(function(a){console.info("--登录成功后返回值--",a),sessionStorage.setItem("ca-login-type",b.credentials.selectedOption.type),sessionStorage.setItem("ca-login-certid",b.credentials.selectedOption.certid),window.location.href=a.redirectUri}).error(function(a){b.loginButton="单位证书用户登录",b.isSubmit=!1,console.info("--登录失败--",a),a.hasOwnProperty("detail")?f.showError("登录失败："+a.detail):a.hasOwnProperty("message")?f.showError("登录失败："+a.message):f.showError("登录失败："+a)})};b.loginSystem=function(a){if(a.$valid){var c=b.credentials.selectedOption;if(!c.hasOwnProperty("type"))return void f.showError("请选择证书");b.loginButton="登录中。。。",b.isSubmit=!0;var e=b.credentials.selectedOption.type;d.info("当前证书厂商",b.credentials.selectedOption,e),r(e),s(e).then(t).then(u).then(v).then(w).then(x)}},$_$onUsbKeyChangeCallBackFunc=function(){console.log("接收到usb change事件");var a=document.getElementById("caview"),b=angular.element(a).scope();b.initLogin()};var y=function(a){var c=k.defer();return a?m.loadCert(function(e){d.info(a+"获取证书成功",e.length),l(b,function(){if(e.length>0){for(var c=0;c<e.length;c++){var d=e[c];d.type=a;var f=JSON.stringify(b.credentials.certsOptions).indexOf(d.certid);f==-1&&b.credentials.certsOptions.push(d)}b.credentials.selectedOption=b.credentials.certsOptions[0]}}),c.resolve()},function(b){d.error(a+"获取证书失败",b),c.resolve()}):c.resolve(),c.promise},z=function(){q++;var a=p[q];r(a);var b=k.defer();return m.initCAObject(function(c){d.info(a+"初始化CA组件成功"),b.resolve(a)},function(c){d.error(a+"初始化CA组件失败",c),b.resolve()}),b.promise};b.initLogin=function(){l(b,function(){b.credentials.password="",b.credentials.certsOptions=[],b.credentials.selectedOption={}}),q=-1,z().then(y).then(z).then(y).then(function(){l(b,function(){0==b.credentials.certsOptions.length&&f.showError("未安装驱动或未插入Ukey",5e3),m=null,b.loginButton="单位证书用户登录"})})}}]),angular.module("authserver.ca").factory("caService",["$http","$resource","messageBox",function(a,b,c){var d={};return d}]),angular.module("authserver.ca").config(["$routeProvider",function(a){a.when("/calogin",{templateUrl:"modules/ca/views/login.html",controller:"caCtrl"})}]);var $_$onUsbKeyChangeCallBackFunc=null;!function(){function a(){return"undefined"!=typeof WGUKey?void clearInterval(d):void(document.body&&document.body.childNodes&&(window.WGUKey=document.createElement("OBJECT"),WGUKey.id="WGUKey",WGUKey.setAttribute("TYPE","WallGreat-x-itst-activex"),WGUKey.data="data:application/x-oleobject;base64,7rU6JZ20LkCKhnD/kuq4nxAHAADYEwAA2BMAAA==",WGUKey.setAttribute("clsid","{253AB5EE-B49D-402E-8A86-70FF92EAB89F}"),WGUKey.setAttribute("progid","WallGreatUKey.UKey"),WGUKey.setAttribute("viewastext","viewastext"),WGUKey.style.width=0,WGUKey.style.height=0,WGUKey.style.display="none",document.body.insertBefore(WGUKey,document.body.childNodes[0])))}if("undefined"==typeof WGUKey){var b=/msie/.test(navigator.userAgent.toLowerCase())||/rv:\d+\.0\S+\s+like\sgecko/.test(navigator.userAgent.toLowerCase());if(b){window.WGUKey=document.createElement("OBJECT"),WGUKey.id="WGUKey",WGUKey.data="data:application/x-oleobject;base64,7rU6JZ20LkCKhnD/kuq4nxAHAADYEwAA2BMAAA==",WGUKey.classid="clsid:253AB5EE-B49D-402E-8A86-70FF92EAB89F",WGUKey.VIEWASTEXT="VIEWASTEXT";var c=document.getElementsByTagName("head")[0];c.insertBefore(WGUKey,c.childNodes[0])}else{a();var d=setInterval(a,1)}}}();var base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),domain="http://127.0.0.1:64737";window.WallGreatUKey={ConnectUK:function(a,b){var c=$.ajax({type:"POST",url:domain+"/ConnectUK",async:!1,dataType:"json",data:{UKeyName:a,SessionId:b},success:function(a){}});return c.responseText},UKReadCertData:function(a,b,c){var d=$.ajax({type:"POST",url:domain+"/UKReadCertData",async:!1,dataType:"json",data:{CertFlag:a,ContainerName:b,SessionId:c},success:function(a){}});return d.responseText},UKGetUkeyCertInfo:function(a,b,c,d){var e=$.ajax({type:"POST",url:domain+"/UKGetUkeyCertInfo",async:!1,dataType:"json",data:{CertFlag:a,DataFlag:b,ContainerName:c,SessionId:d},success:function(a){}});return e.responseText},UKGetCertExtensions:function(a,b,c){var d=$.ajax({type:"POST",url:domain+"/UKGetCertExtensions",async:!1,dataType:"json",data:{Cert:a,OID:b,SessionId:c},success:function(a){}});return d.responseText},UKSignData:function(a,b,c){var d=$.ajax({type:"POST",url:domain+"/UKSignData",async:!1,data:{ContainerName:a,InData:b,SessionId:c},success:function(a){}});return d.responseText},UKSignFileData:function(a,b,c){var d=$.ajax({type:"POST",url:domain+"/UKSignFileData",async:!1,data:{ContainerName:a,InData:b,SessionId:c},success:function(a){}});return d.responseText},UKVerifyPin:function(a,b){var c=$.ajax({type:"POST",url:domain+"/UKVerifyPin",async:!1,dataType:"json",data:{szUserPin:a,SessionId:b},success:function(a){}});return c.responseText},UKVerifyData:function(a,b,c,d,e){var f=$.ajax({type:"POST",url:domain+"/UKVerifyData",async:!1,data:{CertData:a,SrcData:b,DestData:c,nCertFlag:d,SessionId:e},success:function(a){}});return f.responseText},UKVerifyFileData:function(a,b,c,d,e){var f=$.ajax({type:"POST",url:domain+"/UKVerifyFileData",async:!1,data:{CertData:a,SrcData:b,DestData:c,nCertFlag:d,SessionId:e},success:function(a){}});return f.responseText},UKExportSM2Key:function(a,b,c){var d=$.ajax({type:"POST",url:domain+"/UKExportSM2Key",async:!1,dataType:"json",data:{Flag:a,ContainerName:b,SessionId:c},success:function(a){}});return d.responseText},UKExportRSAKey:function(a,b,c){var d=$.ajax({type:"POST",url:domain+"/UKExportRSAKey",async:!1,dataType:"json",data:{Flag:a,ContainerName:b,SessionId:c},success:function(a){}});return d.responseText}};var $NEUCA={GX_API:function(){function a(a,b){return(h=CreateXTXAppObject())?void(a&&a()):(h=CreateWebSocketObject(a,b),void(!h&&b&&b()))}function b(a,b){h.SOF_GetUserList(function(b){var c=b.retVal;if(!c)return void a([]);for(var d=[],e=c.split("&&&"),f=0;f<e.length;f++){var g=e[f];if(g&&(cert_info=g.split("||"),!(cert_info.length<2))){var i={};i.certid=cert_info[1],i.certcn=cert_info[0],d.push(i)}}if(0==d.length)return void a(d);for(var j=d.length,k=[],f=0;f<d.length;f++)h.SOF_ExportUserCert(d[f].certid,function(b){var c=b.retVal;if(c)h.SOF_GetCertInfo(c,8,function(b){var c=b.retVal;if("Guangxi SM2 CA"!=c&&"Guangxi CA"!=c||k.push(b.ctx),0==--j)return void a(k)},b.ctx);else if(0==--j)return void a(k)},d[f])})}function c(a,b,c){h.SOF_ExportUserCert(a,function(a){var d=a.retVal;if(!d&&c){var e={};return e.errorCode="1",e.errorMsg="获取证书失败",void c(e)}h.SOF_GetCertInfoByOid(d,"1.2.156.112562.6.1.2",function(a){var e=a.retVal;return e?void b(e.split("&")):void h.SOF_GetCertInfo(d,35,function(a){var d=a.retVal;if(!d&&c){var e={};return e.errorCode="2",e.errorMsg="获取证书dn失败",void c(e)}if(b){for(var f=d.split(","),g=0;g<f.length;g++){var h=f[g].split("=");if(!(h.length<2)){var i=h[0],j=h[1];if("surname"==i||"OU"==i)return void b(j.split("&"))}}if(c){var e={};return e.errorCode="3",e.errorMsg="解析证书dn失败",void c(e)}}})})})}function d(a,b,c,d){h.SOF_SignData(a,b,function(a){var b=a.retVal;return b?void c(b):void d(b)})}function e(a,b,c,d){h.SOF_SignFile(a,b,function(a){var b=a.retVal;return b?void c(b):void d(b)})}function f(a,b,c){h.SOF_ExportUserCert(a,function(a){var d=a.retVal;return d?void b(d):void c(d)})}function g(a,b,c,d){h.SOF_Login(a,b,function(b){var e=b.retVal;e?c():h.SOF_GetPinRetryCount(a,function(a){var b={};b.errorCode="1",b.errorMsg="校验证书密码失败，密码剩余重试次数（"+a.retVal+"），请重新输入证书密码！",d&&d(b)})})}var h;return{initCAObject:a,loadCert:b,loadNumber:c,signData:d,signFile:e,exportUserCert:f,login:g}}(),DF_API:function(){function a(a,b){var c=!1,d={};if(c=Connect("WALLGREAT"),c===!1)d.errorCode="0",d.errorMsg="未插入uskey";else{if("err"!=c)return void a();d.errorCode="1",d.errorMsg="未安装驱动"}b(d)}function b(a,b){var c=[],d={},e=GetCertInfo(1,1,"WALLGREATSM2"),f=GetCertInfo(1,5,"WALLGREATSM2");if(0!=e&&0!=f)return d.certid=f,d.certcn=e,c.push(d),void a(c);var g={};g.errorCode="0",g.errorMsg="请确认uskey中是否有证书",b(g)}function c(a,b,c){var d=[],e=GetCertInfo(1,18,"WALLGREATSM2");if("sm3withsm2"==e){var f=getCertData("WALLGREATSM2"),g=GetCertExtensions(f,"1.34.56.876.3");g=trim(g,"g");var h=g.split("_");if(0!=g)for(var i=0;i<h.length;i++)d.push(h[i])}else{var f=getCertData("WALLGREAT"),g=GetCertInfo(1,12,"WALLGREAT");g=trim(g,"g");var h=g.split("-");if(g=2==h.length&&h[1],0!=g){h=g.split("&");for(var i=0;i<h.length;i++)d.push(h[i])}}if(d.length>0)b(d);else{var j={};j.errorCode="0",j.errorMsg="请确认uskey中是否有证书",c(j)}}function d(a,b,c,d){var e={},f=GetCertInfo(1,18,"WALLGREATSM2");if(""==b||void 0==b)return e.errorCode="0",e.errorMsg="原文没有内容",void d(e);if("sm3withsm2"==f){var g=SignData("WALLGREATSM2",b);return 0==g?(e.errorCode="0",e.errorMsg="SSKey签名失败",void d(e)):void c(g)}var h=getCertData("WALLGREAT");if(h){var i=GetCertInfo(1,0,"WALLGREAT"),j="DFCA Pubilc Root RSA";if(i==j){var g=(Connect("WALLGREATRSA"),SignData("WALLGREAT",b));return 0==g?(e.errorCode="0",e.errorMsg="SSKey签名失败",void d(e)):void c(g)}return e.errorCode="0",e.errorMsg="该证书不是东方新诚信颁发的证书",void d(e)}return e.errorCode="0",e.errorMsg="没有RSA证书",void d(e)}function e(a,b,c,d){var e={},f="",g=GetCertInfo(1,18,"WALLGREATSM2");if(""==b||void 0==b)return e.errorCode="0",e.errorMsg="文件路径没有内容",void d(e);if("sm3withsm2"==g){var f=SignFile("WALLGREATSM2",b);return 0==f?(e.errorCode="0",e.errorMsg="SSKey附件签名失败",void d(e)):void c(f)}Connect("WALLGREATRSA");return f=SignFile("WALLGREAT",b),0==f?(e.errorCode="0",e.errorMsg="SSKey附件签名失败",void d(e)):void c(f)}function f(a,b,c){var d={},e="",f=GetCertInfo(1,18,"WALLGREATSM2");if("sm3withsm2"==f){var g=getCertData("WALLGREATSM2");return g===!1?(d.errorCode="0",d.errorMsg="获取UKEY证书失败",void c(d)):(e=g,void b(e))}var g=(Connect("WALLGREATRSA"),getCertData("WALLGREAT"));return g===!1?(d.errorCode="0",d.errorMsg="获取UKEY证书失败",void c(d)):(e=g,void b(e))}function g(a,b,c){var d={};if(""==a||void 0==a)return d.errorCode="0",d.errorMsg="请输入用户PIN码",void c(d);var e=verifyUPin(a);return e===!0?void b():(d.errorCode="0",d.errorMsg=e,void c(d))}function h(a,b,c,d){g(b,c,d)}return{initCAObject:a,loadCert:b,loadNumber:c,signData:d,signFile:e,exportUserCert:f,verifyUserPin:g,login:h}}()};angular.module("authserver.school").controller("schoolCtrl",["$rootScope","$scope","$location","$log","CaptchaService","schoolService","messageBox","$http","girderConfig","XSRFTokenService",function(a,b,c,d,e,f,g,h,i,j){b.messageBox=g,b.loginSystem=function(a){if(a.$valid){var c="",d={username:encryptByDES(b.credentials.username,b.credentials.randrom),password:encryptByDES(b.credentials.password,b.credentials.randrom)};angular.forEach(d,function(a,b){c+=b+"="+a+"&"}),console.info("--fd--",c),c=c.substr(0,c.length-1),console.info("--截取后的fd--",c),h.post(i.baseUrl+"api/siagent/usernamepassword/login",c,{headers:{"Content-Type":"application/x-www-form-urlencoded",captchaWord:b.credentials.captchaWord,captchaId:b.credentials.captchaId}}).success(function(a){console.info("--登录成功后返回值--",a),window.location.href=a.redirectUri}).error(function(a){b.getCaptcha(),g.showError(a.message)})}},b.credentials={username:"",taxcode:"",password:"",captchaId:null,captchaWord:null,randrom:""},j.getXsrfToken().success(function(a,c,d,e){b.getCaptcha(),b.credentials.randrom=a.randrom}).error(function(a,b){}),b.getCaptcha=function(){e.getNextCaptcha().$promise.then(function(a){d.info("loginCtrl获取到验证码",a.id),b.captchaUrl=a.getImageUrl()+"?"+Math.random(),b.credentials.captchaId=a.id})},b.checkSignerX=function(a){try{window.location.href=a}catch(a){}}}]),angular.module("authserver.school").factory("schoolService",["$http","$log","$resource",function(a,b,c){var d={};return d}]),angular.module("authserver.school").config(["$routeProvider",function(a){a.when("/siagentlogin",{templateUrl:"modules/school/views/login.html",controller:"schoolCtrl"})}]),angular.module("authserver.expert").controller("expertpasswordCtrl",["CaptchaService","XSRFTokenService","$rootScope","$scope","$location","$log","IDCard","expertService","messageBox","$http",function(a,b,c,d,e,f,g,h,i,j){d.confirmPassword="";var k,l=null,m=60;window.clearInterval(l),d.messageBox=i,d.captcha={captchaUrl:"",captchaId:"",captchaWord:""},d.MobileInfo={captchaId:"",captchaWord:""},d.passWordResetDetailDTO={newPassword:"",idNumber:""},d.checkCardNum=function(){if(d.idNumber=d.passWordResetDetailDTO.idNumber,void 0===d.idNumber||""===d.idNumber)return!0;"x"===d.idNumber.substring(17)&&(d.passWordResetDetailDTO.idNumber=d.idNumber.substring(0,17)+d.idNumber.substring(17).toLocaleUpperCase());var a=g.validateIDCard(d.passWordResetDetailDTO.idNumber);return d.isValid=a.message,"false"===a.isValid&&(d.messageBox.showInfo(a.message),!0)},d.usernameChanged=function(){return d.pwmobilenumbermsg="",f.info("获取手机号，用户名是",d.passWordResetDetailDTO.name),f.info("获取手机号，证件号是",d.passWordResetDetailDTO.idNumber),null===d.passWordResetDetailDTO.name||void 0===d.passWordResetDetailDTO.name||""===d.passWordResetDetailDTO.name?void f.error("请输入姓名!"):null===d.passWordResetDetailDTO.idNumber||void 0===d.passWordResetDetailDTO.idNumber||""===d.passWordResetDetailDTO.idNumber?void f.error("请输入证件号码!"):void h.mobileNumberGet(d.passWordResetDetailDTO.name,d.passWordResetDetailDTO.idNumber).then(function(a){f.info("手机号码查询成功",a),d.pwmobilenumbermsg="发送到"+a.data.mobilenumber},function(a){f.info("手机号码查询失败",a),a.data.hasOwnProperty("detail")?d.pwmobilenumbermsg=a.data.detail:a.data.hasOwnProperty("message")?d.pwmobilenumbermsg=a.data.message:d.messageBox.showInfo("手机号码查询失败！")})},d.validatePassword=function(){var a=/^[a-zA-Z]{1}.*\d+.*$/;return d.password=d.passWordResetDetailDTO.newPassword,a.test(d.password)},d.resetLoginPassword=function(){d.validateCode()||d.validateProtect()||(d.MobileInfo.captcha=d.passWordResetDetailDTO.captcha,h.restPasswordMethod(d.MobileInfo,d.passWordResetDetailDTO).then(function(){f.info("密码重置成功！"),e.path("/expertPassword_View")},function(a){d.getCaptcha(),f.info("密码重置失败",a),a.data.hasOwnProperty("detail")?d.messageBox.showInfo("密码重置失败!"+a.data.detail):a.data.hasOwnProperty("message")?d.messageBox.showInfo("密码重置失败!"+a.data.message):d.messageBox.showInfo("密码重置失败！")}))},d.validateCode=function(){return void 0===d.passWordResetDetailDTO.name||""===d.passWordResetDetailDTO.name||null===d.passWordResetDetailDTO.name?(d.messageBox.showInfo("请输入您的姓名！"),!0):d.resetForm.idNumber.$invalid?(null==d.resetForm.idNumber.$viewValue||""==d.resetForm.idNumber.$viewValue?d.messageBox.showInfo("请输入证件号码！"):d.messageBox.showInfo("请输入正确位数的证件号码！"),!0):!!d.checkCardNum()||(void 0===d.captcha.captchaWord||""===d.captcha.captchaWord)&&(d.messageBox.showInfo("请输入图形验证码！"),!0)},d.validateProtect=function(){return void 0===d.passWordResetDetailDTO.newPassword||6>d.passWordResetDetailDTO.newPassword.length?(null==d.resetForm.newPassword.$viewValue||""==d.resetForm.newPassword.$viewValue?d.messageBox.showInfo("请输入至少6位的密码！"):d.messageBox.showInfo("密码不合法，请修改！"),!0):!(!d.resetForm.confirmpassword.$error._required&&!d.resetForm.confirmpassword.$error.notEqual)&&(null==d.resetForm.confirmpassword.$viewValue||""==d.resetForm.confirmpassword.$viewValue?d.messageBox.showInfo("请输入重复密码！"):d.passWordResetDetailDTO.newPassword!=d.resetForm.confirmpassword.$viewValue?d.messageBox.showInfo("设置密码与重复密码不匹配！"):d.messageBox.showInfo("重复密码有误，请修改！"),!0)},d.getCaptcha=function(){a.getNextCaptcha().$promise.then(function(a){f.info("loginCtrl获取到验证码",a.id),d.captchaUrl=a.getImageUrl()+"?"+Math.random(),d.captcha.captchaId=a.id})},d.getCaptcha(),d.passwordCtrlMessage=function(){d.validateCode()||h.mobileCodePostByPersonNumberxiaowzh(d.passWordResetDetailDTO.idNumber,d.passWordResetDetailDTO.name,d.passWordResetDetailDTO.personNumber,d.captcha).then(function(a){d.pwmobilenumbermsg="发送到"+a.data.mobilenumber,f.info("验证码已经发送"),k=m,angular.element("#btnPSendCode").attr("disabled","true"),angular.element("#btnPSendCode").val(k+"秒后重发"),l=window.setInterval(function(){0==k?(window.clearInterval(l),angular.element("#btnPSendCode").removeAttr("disabled"),angular.element("#btnPSendCode").val("重新发送"),angular.element("#resetMobileNumber").removeAttr("disabled")):(k--,angular.element("#btnPSendCode").val(k+"秒后重发"),angular.element("#resetMobileNumber").attr("disabled","true"))},1e3)},function(a){d.getCaptcha(),a.data.hasOwnProperty("detail")?d.messageBox.showInfo("手机验证码发送失败！"+a.data.detail):a.data.hasOwnProperty("message")?d.messageBox.showInfo(a.data.message):d.messageBox.showInfo("手机验证码发送失败！")})}}]).animation(".P_L_T_input",function(){return{enter:function(a,b){a.css({position:"relative",left:-10,opacity:0}),a.animate({left:0,opacity:1},b)},leave:function(a,b){a.css({position:"relative",left:0,opacity:1}),a.animate({left:-10,opacity:0},b)}}}),angular.module("authserver.expert").controller("expertCtrl",["$rootScope","XSRFTokenService","$scope","$location","$log","CaptchaService","messageBox","$cookies","$cookieStore","girderConfig","$http",function(a,b,c,d,e,f,g,h,i,j,k){c.messageBox=g,c.personcredentials={idNum:"",password:"",captchaId:null,captchaWord:null,randrom:""},c.loginSystem=function(a){if(a.$valid){var b="",d={username:encryptByDES(c.personcredentials.idNum,c.personcredentials.randrom),password:encryptByDES(c.personcredentials.password,c.personcredentials.randrom)};angular.forEach(d,function(a,c){b+=c+"="+a+"&"}),b=b.substr(0,b.length-1),k.post(j.baseUrl+"api/expert/login",b,{headers:{"Content-Type":"application/x-www-form-urlencoded",captchaWord:c.personcredentials.captchaWord,captchaId:c.personcredentials.captchaId}}).success(function(a){window.location.href=a.redirectUri}).error(function(a){c.persongetCaptcha(),g.showError(a.message)})}},c.persongetCaptcha=function(){f.getNextCaptcha().$promise.then(function(a){c.personcaptchaUrl=a.getImageUrl()+"?"+Math.random(),c.personcredentials.captchaId=a.id})},b.getXsrfToken().success(function(a,b,d,e){c.persongetCaptcha(),c.personcredentials.randrom=a.randrom}).error(function(a,b){}),c.addFavorite=function(){e.info("添加到收藏夹");try{window.external.addFavorite("http://public.tj.hrss.gov.cn/personlogin/","六安市社会保险网上")}catch(a){try{window.sidebar.addPanel("天津个人社保申报","http://public.tj.hrss.gov.cn/personlogin/","")}catch(a){c.messageBox.showInfo("抱歉，您所使用的浏览器无法完成此操作。\n\n加入收藏失败，请使用Ctrl+D进行添加\n\n收藏地址：http://public.tj.hrss.gov.cn/personlogin/")}}},c.tellYou=function(){c.messageBox.showInfo("如原手机丢失，请本人携带身份证原件和新手机到社保分中心柜台办理注册手机变更业务。")}}]),angular.module("authserver.expert").factory("expertService",["$http","$log","$resource","girderConfig",function(a,b,c,d){var e=[],f=d.baseUrl+"ws/password/reset/expert",g=d.baseUrl+"captcha/sm",h=d.baseUrl+"ws/user/person/mobilenumber",i=d.baseUrl+"ws/user/expert/active",j=d.baseUrl+"captcha/sm/idnumbername",k=d.baseUrl+"captcha/sm/byexpert",l=(d.baseUrl+"captcha/sm/web/",d.baseUrl+"ws/question"),m=d.baseUrl+"ws/user/question";return e.CodePostMethod=function(b,c){return a({method:"POST",url:g,headers:c,data:b})},e.restPasswordMethod=function(b,c){return a({method:"PUT",url:f,headers:b,data:c})},e.modifyMobileMethod=function(b,c){return a({method:"PUT",url:h,headers:c,data:b})},e.registePerson=function(b,c){return a({method:"POST",url:i,headers:c,data:b})},e.mobileNumberGet=function(c,d){return b.info("获取手机号",c,d),a({method:"POST",url:j,data:{mobilenumber:"",name:c,idNumber:d}})},e.mobileCodePostByName=function(c,d,e){return b.info("发送验证码",c,d),a({method:"POST",url:k,headers:e,data:{name:c,idNumber:d}})},e.mobileCodePostByPersonNumberxiaowzh=function(c,d,e,f){return b.info("发送验证码",c,d,e,f),a({method:"POST",url:k,headers:f,data:{name:d,idNumber:c,personNumber:e}})},e.getQuestionList=function(){return a({method:"GET",url:l})},e.getQuestionListById=function(b){return a({method:"GET",url:m+"/"+b})},e}]),angular.module("authserver.expert").controller("expertregisterCtrl",["CaptchaService","XSRFTokenService","messageBox","$rootScope","$scope","$location","$log","IDCard","expertService","$timeout",function(a,b,c,d,e,f,g,h,i,j){e.disableCanbaoSelectRadio=!0,e.isCanbao=[0,1],e.checkBox=null,e.confirmPassword="";var k,l=null,m=60;window.clearInterval(l),e.messageBox=c,e.captcha={captchaUrl:"",captchaId:"",captchaWord:""},e.tjPersonUserDTO={idNumber:"",name:"",password:""},e.goToRegiste=function(){g.info("注册协议的checkbox="+e.checkBox),!1===e.checkBox||null===e.checkBox?e.messageBox.showInfo("您尚未同意协议内容。"):!0===e.checkBox&&f.path("/personRegister")},e.MobileInfo={mobilenumber:"",captchaId:"",captchaWord:""},e.MobileDTO={title:"",content:"",url:"",mobile:"",email:"",webacc:"",name:""},e.checkCardNum=function(){if(e.idNumber=e.tjPersonUserDTO.idNumber,void 0===e.idNumber||""===e.idNumber)return!0;"x"===e.idNumber.substring(17)&&(e.tjPersonUserDTO.idNumber=e.idNumber.substring(0,17)+e.idNumber.substring(17).toLocaleUpperCase());var a=h.validateIDCard(e.tjPersonUserDTO.idNumber);return e.isValid=a.message,"false"===a.isValid&&(e.messageBox.showInfo(a.message),!0)},e.secretQuestion={birth:"",fatherName:"",motherName:""},e.validatePhone=function(){var a=/^1[34578]\d{9}$/;return e.mobilenumber=e.MobileInfo.mobilenumber,a.test(e.mobilenumber)},e.validatePassword=function(){var a=/^[a-zA-Z]{1}.*\d+.*$/;return e.password=e.tjPersonUserDTO.password,a.test(e.password)},e.registeredUser=function(){e.validateCode()||e.validateRegister()||(e.MobileInfo.captchaId=e.captcha.captchaId,e.MobileInfo.captchaWord=e.captcha.captchaWord,console.info("---注册信息1---",e.tjPersonUserDTO),console.info("---注册信息2---",e.MobileInfo),i.registePerson(e.tjPersonUserDTO,e.MobileInfo).then(function(a){f.path("/expertRegister_View")},function(a){e.getCaptcha(),g.info("注册失败",a),a.data.hasOwnProperty("detail")?e.messageBox.showInfo("注册失败！"+a.data.detail):a.data.hasOwnProperty("message")?e.messageBox.showInfo("注册失败！"+a.data.message):e.messageBox.showInfo("当前用户注册失败！")}))},e.passwordCtrlMessage=function(){return!e.validateCode()&&void i.mobileCodePostByPersonNumberxiaowzh(e.tjPersonUserDTO.idNumber,e.tjPersonUserDTO.name,e.tjPersonUserDTO.personNumber,e.captcha).then(function(a){e.pwmobilenumbermsg="发送到"+a.data.mobilenumber,g.info("验证码已经发送"),k=m,angular.element("#btnPSendCode").attr("disabled","true"),angular.element("#btnPSendCode").val(k+"秒后重发"),l=window.setInterval(function(){0==k?(window.clearInterval(l),angular.element("#btnPSendCode").removeAttr("disabled"),angular.element("#btnPSendCode").val("重新发送"),angular.element("#resetMobileNumber").removeAttr("disabled")):(k--,angular.element("#btnPSendCode").val(k+"秒后重发"),angular.element("#resetMobileNumber").attr("disabled","true"))},1e3)},function(a){e.getCaptcha(),a.data.hasOwnProperty("detail")?e.messageBox.showInfo("手机验证码发送失败！"+a.data.detail):a.data.hasOwnProperty("message")?e.messageBox.showInfo(a.data.message):e.messageBox.showInfo("手机验证码发送失败！")})},e.getCaptcha=function(){a.getNextCaptcha().$promise.then(function(a){g.info("loginCtrl获取到验证码",a.id),e.captchaUrl=a.getImageUrl()+"?"+Math.random(),e.captcha.captchaId=a.id})},e.getCaptcha(),e.sendRegisterMessage=function(){e.validateCode()||(e.MobileDTO.title="个人注册",e.MobileDTO.mobile=e.MobileInfo.mobilenumber,e.MobileDTO.webacc=e.tjPersonUserDTO.idNumber,e.MobileDTO.name=e.tjPersonUserDTO.name,e.BatchMsgDto={msglst:[e.MobileDTO],msgType:"Sms",userType:"PERSON",businessType:"Register",clientType:"PC",systemType:"Person"},i.CodePostMethod(e.BatchMsgDto,e.captcha).then(function(a){200!=a.data.code?(e.getCaptcha(),e.messageBox.showInfo("手机验证码发送失败！"+a.data.errmsg)):(k=m,angular.element("#btnRegisterSendCode").attr("disabled","true"),angular.element("#btnRegisterSendCode").val(k+"秒后重发"),l=window.setInterval(function(){0==k?(window.clearInterval(l),angular.element("#btnRegisterSendCode").removeAttr("disabled"),angular.element("#btnRegisterSendCode").val("重新发送"),angular.element("#registerMobileNumber").removeAttr("disabled")):(k--,angular.element("#btnRegisterSendCode").val(k+"秒后重发"),angular.element("#registerMobileNumber").attr("disabled","true"))},1e3))},function(a){e.getCaptcha(),a.data.hasOwnProperty("detail")?e.messageBox.showInfo("手机验证码发送失败！"+a.data.detail):a.data.hasOwnProperty("message")?e.messageBox.showInfo(a.data.message):e.messageBox.showInfo("手机验证码发送失败！")}))},e.validateCode=function(){return void 0===e.tjPersonUserDTO.name||1>e.tjPersonUserDTO.name.length?(e.messageBox.showInfo("请输入注册人姓名！"),
!0):e.registerForm.idNumber.$invalid?(null==e.registerForm.idNumber.$viewValue||""==e.registerForm.idNumber.$viewValue?e.messageBox.showInfo("请输入证件号码！"):e.messageBox.showInfo("请输入正确位数的证件号码！"),!0):!!e.checkCardNum()||(void 0===e.captcha.captchaWord||""===e.captcha.captchaWord)&&(e.messageBox.showInfo("请输入图形验证码！"),!0)},e.validateRegister=function(){return void 0===e.tjPersonUserDTO.password||6>e.tjPersonUserDTO.password.length?(null==e.registerForm.password.$viewValue||""==e.registerForm.password.$viewValue?e.messageBox.showInfo("请输入至少6位的密码！"):e.messageBox.showInfo("密码不合法，请修改！"),!0):!(!e.registerForm.confirmpassword.$error._required&&!e.registerForm.confirmpassword.$error.notEqual)&&(null==e.registerForm.confirmpassword.$viewValue||""==e.registerForm.confirmpassword.$viewValue?e.messageBox.showInfo("请输入重复密码！"):e.tjPersonUserDTO.password!=e.registerForm.confirmpassword.$viewValue?e.messageBox.showInfo("设置密码与重复密码不匹配！"):e.messageBox.showInfo("重复密码有误，请修改！"),!0)}}]),angular.module("authserver.expert").config(["$routeProvider",function(a){a.when("/expertlogin",{templateUrl:"modules/expert/views/expertlogin.html",controller:"expertCtrl"}).when("/expertRegister",{templateUrl:"modules/expert/views/expertregister.html",controller:"expertregisterCtrl"}).when("/expertRegister_View",{templateUrl:"modules/expert/views/expertregister_view.html"}).when("/expertPassword",{templateUrl:"modules/expert/views/expertpassword.html",controller:"expertpasswordCtrl"}).when("/expertPassword_View",{templateUrl:"modules/expert/views/expertpassword_view.html"})}]),angular.module("AuthUI").run(["$templateCache",function(a){"use strict";a.put("modules/ca/views/login.html",'<div class="L_bag" id="caview" ng-init="loginButton = \'数据加载中。。。\';initLogin()"> <div class="L_three_enterprise"> <div class="L_t_left"></div> <div class="L_t_right"> <form class="form-horizontal" style="margin: 0 15px" method="post" id="loginForm" name="loginForm" ng-submit="loginSystem(loginForm)"> <div class="L_o_text">欢迎登录</div> <div class="fg" style="height:10px"></div> <div class="L_t_text"> <div class="L_T_admin">选择证书：</div> <div class="L_T_adright"> <select id="selectcert" class="L_t_input" ng-options="x.certcn for x in credentials.certsOptions track by x.certid" data-ng-model="credentials.selectedOption" required> </select> </div> </div> <div class="L_t_text"> <div class="L_T_admin">证书密码：</div> <div class="L_T_adright"> <input class="L_t_input" name="password" type="password" id="inputPassword" data-ng-model="credentials.password" required> </div> </div> <div class="fg" style="height:20px"></div> <button type="submit" class="L_t_text_color hand" style="margin-left: 11%" ng-disabled="isSubmit"> {{loginButton}} </button> </form> <div style="float: right;margin-right:10%; margin-top: 17px; background: #f0f0f0"> <a href="/download/GXCA.zip">广西CA驱动下载</a> </div> <div style="float: left;margin-left: 10%; margin-top: 17px; background: #f0f0f0"> <a href="/download/DFCA.rar">东方CA驱动下载</a> </div> <div style="float: left;margin-left: 10%; margin-top: 17px; background: #f0f0f0"> <a href="/download/OperationInstruction.rar">用户手册下载</a> </div> <div style="float: right;margin-right:10%; margin-top: 17px; background: #f0f0f0"> <a href="/download/CAApplication.rar">申请表格下载</a> </div> <div style="float: left;margin-left: 10%; margin-top: 17px; background: #f0f0f0"> <a href="javascript:alert(\'暂无文件\');">通知文件下载</a> </div> <div style="float: right;margin-right:10%; margin-top: 17px; background: #f0f0f0"> <a href="/download/QQGroup.rar">交流群QQ号</a> </div> <div style="float: left;margin-left: 10%; margin-top: 17px; background: #f0f0f0"> <a href="/download/BusinessInstruction.rar">（重要）单位网报业务须知</a> </div> </div> </div> </div> <div class="L_twofg" style="border-bottom:#d4d4d4 1px solid;height:10px"></div> <div class="P_L_twofg"> <div class="P_L_twoleft" style="width:auto"> 建议使用Google Chrome 浏览器（Chrome 49.0及以上版本）、360浏览器（极速模式）访问系统。 <a target="_blank" style="color:red">Chrome 64位浏览器下载 <a style="bold" href="http://dl.google.com/chrome/install/ChromeStandaloneSetup64.exe">点击下载；</a> <a target="_blank" style="color:red">Chrome 32位浏览器下载<a style="bold" href="http://dl.google.com/chrome/install/ChromeStandaloneSetup.exe">点击下载；</a> <a target="_blank" style="color:red">360浏览器 <a style="bold" href="https://browser.360.cn/ee/">点击下载；</a> <div>版权所有：南宁市人力资源和社会保障局</div> </a></a></a></div> </div>'),a.put("modules/enterprise/views/bxlogin.html",'<div class="L_bag"> <div class="L_three"> <div class="L_t_right"> <form name="loginForm" id="loginForm" ng-submit="loginSystem(loginForm)"> <div class="L_o_text">账号登录</div> <div class="L_t_text"> <div class="L_T_adright"> <input class="L_t_input" name="username" id="username" autofocus data-ng-model="credentials.username" required type="text" placeholder="请输入用户名"> </div> </div> <div class="L_t_text"> <div class="L_T_adright"> <input class="L_t_input" name="password" type="password" id="inputPassword" data-ng-model="credentials.password" data-ng-minlength="6" required placeholder="请输入密码"> </div> </div> <div class="L_t_text"> <div class="L_T_adright2"> <input type="hidden" id="captchaId" name="captchaId" value="{{credentials.captchaId}}"> <input type="text" id="captchaWord" name="captchaWord" class="L_t_input" data-ng-model="credentials.captchaWord" data-ng-minlength="4" data-ng-maxlength="4" required placeholder="点击图片更换验证码"> </div> <div class="L_t_Code"> <img id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="84" height="40" alt="验证码"> </div> </div> <button type="submit" class="L_t_text_color hand">登 录 系 统</button> </form> </div> </div> </div> <div class="L_twofg"></div>'),a.put("modules/enterprise/views/login.html",'<div class="L_bag"> <div class="L_three"> <div class="L_t_right"> <form name="loginForm" id="loginForm" ng-submit="loginSystem(loginForm)"> <div class="L_o_text">账号登录（{{areaName}}）</div> <div class="L_t_text"> <div class="L_T_adright"> <input class="L_t_input" name="username" id="username" autofocus data-ng-model="credentials.username" required type="text" placeholder="请输入用户名"> </div> </div> <div class="L_t_text"> <div class="L_T_adright"> <input class="L_t_input" name="password" type="password" id="inputPassword" data-ng-model="credentials.password" data-ng-minlength="6" required placeholder="请输入密码"> </div> </div> <div class="L_t_text"> <div class="L_T_adright2"> <input type="hidden" id="captchaId" name="captchaId" value="{{credentials.captchaId}}"> <input type="text" id="captchaWord" name="captchaWord" class="L_t_input" data-ng-model="credentials.captchaWord" data-ng-minlength="4" data-ng-maxlength="4" required placeholder="点击图片更换验证码"> </div> <div class="L_t_Code"> <img id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="84" height="40" alt="验证码"> </div> </div> <button type="submit" class="L_t_text_color hand">登 录 系 统</button> <div class="other_login"> <div class="other_login_title"> <span class="line"></span> <span class="txt">使用其他账号登录</span> <span class="line"></span> </div> <a href="http://175.174.62.1:8081/uaa/idstools/getGssionid/enterprise" class="link_btn2" target="_self"></a> </div> </form> </div> </div> <div class="pop_box" ng-show="popShow"> <a href="" class="pop_close" data-ng-click="popClose()"></a> <div class="pop_head">本溪市人力资源和社会保障公共服务平台试运行</div> <div class="pop_con"> <p><b>市级原账号密码登录相关说明：</b>本页面为市级原网厅账号密码登录入口，如您已在原网厅开通过账号，可使用原账号密码登录。</p> </div> </div> </div> <div class="L_twofg"></div>'),a.put("modules/expert/views/expertlogin.html",'<div class="L_bag"> <div class="L_three_expert"> <div class="L_t_left"></div> <div class="L_t_right"> <form name="loginForm" id="loginForm" ng-submit="loginSystem(loginForm)"> <div class="L_o_text">欢迎登录</div> <div class="fg" style="height:20px"></div> <div class="L_t_text"> <div class="L_T_admin">用户名：</div> <div class="L_T_adright"> <input id="username" data-ng-model="personcredentials.idNum" name="username" class="P_L_t_input" placeholder="证件号码" type="text" required> {{loginForm.username.$valid}} </div> </div> <div class="L_t_text"> <div class="L_T_admin">密 码：</div> <div class="L_T_adright"> <input id="inputPassword" name="password" data-ng-model="personcredentials.password" class="P_L_t_input" type="password" required> </div> </div> <div class="L_t_text"> <div class="L_T_admin">验证码：</div> <div class="L_T_adright2"> <input type="hidden" id="captchaId" name="captchaId" value="{{personcredentials.captchaId}}"> <input type="text" id="captchaWord" name="captchaWord" class="P_L_t_input" data-ng-model="personcredentials.captchaWord" data-ng-minlength="4" data-ng-maxlength="4" required placeholder="点击图片更换验证码" style="width: 90px"> </div> <div class="L_t_Code"> <span> <img id="captchaImage" ng-src="{{personcaptchaUrl}}" style="margin-bottom: 3px" data-ng-click="persongetCaptcha()" width="80" height="30" alt="验证码"></span> </div> <span style="float: left;height: 20px;margin-left: 70px;color:red" ng-if="!loginForm.captchaWord.$valid && loginForm.captchaWord.$touched"> 请输入4位验证码</span> </div> <div class="fg" style="height: 20px"></div> <div class="P_L_t_text_color hand"> <button class="P_L_t_text_color hand" type="submit">登 录 系 统</button> </div> <div class="P_L_t_text" style="margin-top: -20px"> </div> <div class="fg"></div> <div class="fg" style="height:35px"></div> <div class="L_t_text" style="margin-top: -45px"> <div style="float:left; width:80px; height:30px; padding-left:20px; font-size:12px;cursor: pointer"> <span sty="font-size:13px; float:right;"><a href="#/expertPassword">忘记密码</a></span></div> <div style="float:left; width:80px; height:30px; margin-left:80px"><a href="#/expertRegister">注册激活</a></div> </div> </form> </div> </div> </div> <div class="L_twofg" style="border-bottom:#d4d4d4 1px solid;height:10px"></div> <div class="P_L_twofg"> <div class="P_L_twoleft" style="width:auto"> 建议使用Google Chrome 浏览器（Chrome 49.0及以上版本）、Internet Explorer 浏览器（IE 11稳定版本）、搜狗浏览器（急速模式）、360浏览器（极速模式）访问系统。 <span style="color:red">Chrome 49.0及以上版本 <a style="bold" href="https://www.google.cn/intl/zh-CN/chrome/">点击下载；</a> <span style="color:red">IE11浏览器 <a style="bold" href="https://www.microsoft.com/zh-cn/windows/">点击下载；</a> <span style="color:red">搜狗浏览器 <a style="bold" href="https://ie.sogou.com//">点击下载；</a> <span style="color:red">360浏览器 <a style="bold" href="https://browser.360.cn/ee/">点击下载；</a> <div>版权所有：南宁市人力资源和社会保障局</div> </span></span></span></span></div> </div>'),a.put("modules/expert/views/expertpassword.html",'<div style="background:#f6f6f6"> <div class="P_L_cen_right" style="margin-top:-60px;margin-right:180px"> <div class="P_L_ceb_R01 hand"><a href="#/expertlogin" class="P_L_ceb_R01 hand">登 录</a></div> <div class="P_L_ceb_R02 hand"><a href="#/expertRegister" class="P_L_ceb_R02 hand">注 册</a></div> </div> <div class="P_L_twobg"> <form name="resetForm" id="resetForm"> <div class="P_L_register" style="height:480px"> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>姓名：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" autofocus class="L_I_input" id="name" ng-model="passWordResetDetailDTO.name" name="name" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.name.$dirty && resetForm.name.$invalid]" style="line-height:34px">请输入专家姓名。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>证件号码：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" id="idNumber" ng-model="passWordResetDetailDTO.idNumber" data-ng-pattern="/(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/" name="idNumber" required type="text"> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.idNumber.$dirty && resetForm.idNumber.$invalid]" style="line-height:34px">请输入18位有效证件号码。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>专家编号：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" autofocus class="L_I_input" id="personNumber" ng-model="passWordResetDetailDTO.personNumber" name="personNumber" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.name.$dirty && resetForm.name.$invalid]" style="line-height:34px">请输入您的专家编号。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>图形验证码：</div> <div class="P_L_I_Cen03"> <input type="hidden" id="captchaId" name="captchaId" value="{{captcha.captchaId}}"> <input type="text" style="width: 220px" id="captchaWord" name="captchaWord" class="P_L_t_input" data-ng-model="captcha.captchaWord" required placeholder="点击图片更换验证码" style="width: 90px"> </div> <div class="L_t_Code"> <span> <img style="margin-left:70%" id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="80" height="30" alt="验证码"></span> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>手机验证码：</div> <div class="P_L_I_Cen"> <input class="P_L_I_input2" name="validateMobileNumber" ng-model="passWordResetDetailDTO.captcha" required type="text"> <div class="P_L_I_buttom"> <div class="P_L_I_Green hand"> <input id="btnPSendCode" class="P_L_I_Green hand" value="发送验证码" data-ng-click="passwordCtrlMessage()" ng-disabled="resetForm.mobilenumber.$invalid"> </div> </div> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.validateMobileNumber.$dirty && resetForm.validateMobileNumber.$invalid]" style="line-height:34px">请输入您接收到的验证码。 </div> </div> </div> <div class="P_L_T_input" style="height:auto"> <div class="P_L_I_left" style="height:auto"></div> <div class="P_L_I_Cen" style="margin-left:200px;height:auto;width:500px"> <span style="color:red; font-size:13px" class="ng-binding">{{pwmobilenumbermsg}}</span> </div> <div class="P_L_I_Right" style="height:auto"> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>设置密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" name="newPassword" type="password" ng-model="passWordResetDetailDTO.newPassword" data-ng-minlength="6" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.newPassword.$dirty && resetForm.newPassword.$invalid]" style="line-height:34px"> 请设置密码，8位及以上包含数字和字母。 </div> </div> </div> <div class="P_L_T_input" style="height:2px" ng-show="pwmobilenumbermsg"></div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>确认密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" ng-model="confirmPassword" name="confirmpassword" type="password" girder-valid-password="passWordResetDetailDTO.newPassword" required> </div> <div class="P_L_I_Right"> <div id="confirmPassword" class="P_L_zc_ts" ng-class="{true: \'P_L_zc_tr\'}[resetForm.confirmpassword.$dirty&&(resetForm.confirmpassword.$error._required||resetForm.confirmpassword.$error.notEqual)]"> 请再次输入新密码，进行密码确认；请确保两次输入的密码一致。 </div> </div> </div> <div class="L_T_input" style="height:15px"></div> <div class="P_L_t_text_color2 hand" data-ng-click="resetLoginPassword()">重&nbsp;&nbsp;置&nbsp;&nbsp;密&nbsp;&nbsp;码</div> </div> </form> </div> </div> '),a.put("modules/expert/views/expertpassword_view.html",'<div class="P_L_top" style="background:none"> </div> <div class="P_L_twofg"> <div class="P_R_pic">恭喜您！密码修改成功。</div> <div class="P_L_T_input" style="margin:0 auto"> <div class="P_L_I_Cen" style="border:0;  width:50%"> <div class="P_L_ceb_R01 hand" style="float:right"><a href="#/expertlogin" class="P_L_ceb_R01 hand">登 录</a> </div> </div> <div class="P_L_I_Right">返回登录页面</div><br><br><br> </div> </div>'),a.put("modules/expert/views/expertregister.html",'<div style="background:#f6f6f6"> <div class="P_L_cen_right" style="margin-top:-60px;margin-right:180px"> <div class="P_L_ceb_R01 hand"><a href="#/expertlogin" class="P_L_ceb_R01 hand">登 录</a></div> <div class="P_L_ceb_R02 hand"><a href="#/expertPassword" class="P_L_ceb_R02 hand">重置密码</a></div> </div> <div class="P_L_twobg"> <form name="registerForm" id="registerForm"> <div class="P_L_register" style="height:auto"> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>姓名：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" autofocus class="L_I_input" id="name" ng-model="tjPersonUserDTO.name" name="name" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.name.$dirty && registerForm.name.$invalid]" style="line-height:34px">请填写激活专家姓名。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>证件号码：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" id="idNumber" data-ng-pattern="/(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/" ng-model="tjPersonUserDTO.idNumber" ng-blur="checkCardNum();" name="idNumber" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.idNumber.$dirty && registerForm.idNumber.$invalid]" style="line-height:34px">请输入18位有效证件号码。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>专家编号：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" autofocus class="L_I_input" id="personNumber" ng-model="tjPersonUserDTO.personNumber" name="personNumber" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.name.$dirty && registerForm.name.$invalid]" style="line-height:34px">请填写激活专家编号。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>图形验证码：</div> <div class="P_L_I_Cen03"> <input type="hidden" id="captchaId" name="captchaId" value="{{captcha.captchaId}}"> <input type="text" style="width: 220px" id="captchaWord" name="captchaWord" class="P_L_t_input" data-ng-model="captcha.captchaWord" required placeholder="点击图片更换验证码" style="width: 90px"> </div> <div class="L_t_Code"> <span> <img style="margin-left:70%" id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="80" height="30" alt="验证码"></span> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>手机验证码：</div> <div class="P_L_I_Cen"> <input class="P_L_I_input2" name="validateMobileNumber" data-ng-model="MobileInfo.captcha" required type="text"> <div class="P_L_I_buttom"> <input id="btnPSendCode" value="发送验证码" data-ng-click="passwordCtrlMessage()" ng-disabled="registerForm.mobilenumber.$invalid" class="P_L_I_Green hand"> </div> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.validateMobileNumber.$dirty && registerForm.validateMobileNumber.$invalid]" style="line-height:36px">请输入您接收到的验证码。 </div> </div> <div class="P_L_T_input" style="height:auto"> <div class="P_L_I_left" style="height:auto"></div> <div class="P_L_I_Cen" style="margin-left:200px;height:auto;width:500px"> <span style="color:red; font-size:13px" class="ng-binding">{{pwmobilenumbermsg}}</span> </div> <div class="P_L_I_Right" style="height:auto"> </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>设置密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" name="password" id="registerInputPassword" type="password" ng-model="tjPersonUserDTO.password" data-ng-minlength="6" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.password.$dirty && registerForm.password.$invalid]" style="line-height:34px"> 请设置密码，8位及以上包含数字和字母。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>重复密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" name="confirmpassword" girder-valid-password="tjPersonUserDTO.password" ng-model="confirmPassword" type="password" required> </div> <div class="P_L_I_Right"> <div id="confirmPassword" class="P_L_zc_ts" ng-class="{true: \'P_L_zc_tr\'}[registerForm.confirmpassword.$dirty&&(registerForm.confirmpassword.$error._required||registerForm.confirmpassword.$error.notEqual)]"> 请再次输入新密码，进行密码确认；请确保两次输入的密码一致。 </div> </div> </div> <div class="P_L_t_text_color2 hand" style="margin: 20px auto" data-ng-click="registeredUser()">激活 </div> </div> </form> </div> </div> '),a.put("modules/expert/views/expertregister_view.html",'<div class="P_L_top" style="background:none"> </div> <div class="P_L_twofg"> <div class="P_R_pic">恭喜您！注册成功。</div> <div class="P_L_T_input" style="margin:0 auto"> <div class="P_L_I_Cen" style="border:0;  width:50%"> <div class="P_L_ceb_R01 hand" style="float:right"> <button onclick="window.location.href=\'#/expertlogin\'" class="P_L_ceb_R01 hand">登 录</button> </div> </div> <div class="P_L_I_Right">返回登录页面</div> <br><br><br> </div> </div> '),a.put("modules/login/login.html"," "),a.put("modules/person/views/agreement.html",'<div style="background:#f6f6f6"> <div class="P_L_top"> <div class="P_L_center"> <div class="P_L_cen_left"></div> <div class="P_L_cen_right"> <div class="P_L_ceb_R01 hand"><a href="#/personLogin" class="P_L_ceb_R01 hand">登 录</a></div> <div class="P_L_ceb_R02 hand"><a href="#/personAgree" class="P_L_ceb_R02 hand">注 册</a></div> </div> </div> </div> <div style="margin: 40px 20% 20px 20%; padding: 20px;background-color: #fffffe; border-radius: 4px; border: 1px solid #666666;font-family:楷体;height: 800px;overflow-x: hidden;overflow-y: visible"> <h1 style="text-align: center">天津市社会保险个人网厅网站用户注册协议</h1> ---------------------------------------------------------------------------------------------------------<br> <span style="font-size:20px;text-indent:2em"> <strong>第一条 天津市社会保险基金管理中心个人网厅网站服务条款的确认和接纳</strong><br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站的各项电子服务的所有权和运作权归天津市社会保险基金管理中心。天津市社会保险基金管理中心个人网厅网站提供的服务将完全按照其发布的经办规定、服务条款和操作规则严格执行。用户必须完全同意所有服务条款并完成注册程序，才能成为天津市社会保险基金管理中心个人网厅网站的正式用户。<br> <strong>第二条 服务简介</strong><br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站运用自己的操作系统通过国际互联网络为用户提供网络服务。<br> 用户必须：<br> (1)自行配备上网的所需设备，包括个人电脑、调制解调器或其他必备上网装置。<br> (2)自行负担个人上网所支付的与此服务有关的电话费用、网络费用。<br> 基于天津市社会保险基金管理中心个人网厅网站所提供的网络服务的重要性，用户应同意：<br> (1)提供详尽、准确的个人资料。<br> (2)不断更新注册资料，符合及时、详尽、准确的要求。<br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站不公开用户的姓名、身份证号码、社保卡卡号和手机号码，除以下情况外：<br> &emsp;&emsp;相应的法律法规要求天津市社会保险基金管理中心个人网厅网站提供用户的个人资料。如果用户提供的资料包含有不正确的信息，天津市社会保险基金管理中心个人网厅网站保留结束用户使用网络服务资格的权利。<br> <strong>第三条 服务条款的修改和服务修订</strong><br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站有权在必要时修改服务条款，天津市社会保险基金管理中心个人网厅网站服务条款一旦发生变动，将会在重要页面上提示修改内容。如果不同意所改动的内容，用户可以主动取消获得的网络服务。如果用户继续享用网络服务，则视为接受服务条款的变动。天津市社会保险基金管理中心个人网厅网站保留随时修改或中断服务而不需知会用户的权利。天津市社会保险基金管理中心个人网厅网站行使修改或中断服务的权利，不需对用户或第三方负责。<br> <strong>第四条 用户隐私制度</strong><br> &emsp;&emsp;尊重用户个人隐私是天津市社会保险基金管理中心个人网厅网站的一项基本政策。所以，作为对上述个人注册资料分析的补充，天津市社会保险基金管理中心个人网厅网站不会在未经合法用户授权时公开、编辑或透露其注册资料及保存在天津市社会保险基金管理中心个人网厅网站中的非公开内容，除非有法律许可要求或天津市社会保险基金管理中心个人网厅网站在诚信的基础上认为透露这些信息在以下三种情况是必要的：<br> (1)遵守有关法律规定，遵从天津市社会保险基金管理中心个人网厅网站合法服务程序。<br> (2)在紧急情况下竭力维护用户个人和社会大众的隐私安全。<br> (3)符合其他相关的要求。<br> <strong>第五条 用户的帐号，密码和安全性</strong><br> &emsp;&emsp;用户一旦按照本网站的规定方式注册成功，成为天津市社会保险基金管理中心个人网厅网站的合法用户，将得到一个用户名和密码。<br> &emsp;&emsp;用户将对用户名和密码安全负全部责任。另外，每个用户都要对以其用户名进行的所有活动和事件负全责。用户若发现任何非法使用用户帐号或存在安全漏洞的情况，请立即通告天津市社会保险基金管理中心个人网厅网站。<br> <strong>第六条 拒绝提供担保</strong><br> &emsp;&emsp;用户个人对网络服务的使用承担风险。天津市社会保险基金管理中心个人网厅网站对此不作任何类型的担保，不论是明确的或隐含的，但是不对商业性的隐含担保、特定目的和不违反规定的适当担保作限制。天津市社会保险基金管理中心个人网厅网站不担保服务一定能满足用户的要求，也不担保服务不会受中断，对服务的及时性，安全性，出错发生都不作担保。<br> <strong>第七条 有限责任</strong><br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站对任何直接、间接、偶然、特殊及继起的损害不负责任，这些损害可能来自：不正当使用网络服务，在网上购买商品或进行同类型服务，在网上进行交易，非法使用网络服务或用户传送的信息有所变动。这些行为都有可能会导致天津市社会保险基金管理中心个人网厅网站的形象受损，所以天津市社会保险基金管理中心个人网厅网站事先提出这种损害的可能性。<br> <strong>第八条 对用户信息的存储和限制</strong><br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站不对用户所发布信息的删除或储存失败负责。天津市社会保险基金管理中心个人网厅网站有判定用户的行为是否符合天津市社会保险基金管理中心个人网厅网站服务条款的要求和精神的保留权利，如果用户违背了服务条款的规定，天津市社会保险基金管理中心个人网厅网站有中断对其提供网络服务的权利。<br> <strong>第九条 用户管理</strong><br> &emsp;&emsp;用户单独承担发布内容的责任。用户对服务的使用根据所有适用于天津市社会保险基金管理中心个人网厅网站的国家法律、地方法律和国际法律标准。用户必须遵循：<br> (1) 从中国境内向外传输技术性资料时必须符合中国有关法规。<br> (2)使用网络服务不作非法用途。<br> (3)不干扰或混乱网络服务。<br> (4)遵守所有使用网络服务的网络协议、规定、程序和惯例。<br> &emsp;&emsp;用户须承诺不传输任何非法的、骚扰性的、中伤他人的、辱骂性的、恐吓性的、伤害性的、庸俗的，淫秽等信息资料。另外，用户也不能传输任何教唆他人构成犯罪行为的资料；不能传输助长国内不利条件和涉及国家安全的资料；不能传输任何不符合当地法规、国家法律和国际法律的资料。未经许可而非法进入其它电脑系统是禁止的。若用户的行为不符合以上提到的服务条款，天津市社会保险基金管理中心个人网厅网站将作出独立判断立即终止为用户提供所有服务。用户需对自己在网上的行为承担法律责任。<br> &emsp;&emsp;用户若在天津市社会保险基金管理中心个人网厅网站上散布和传播反动、色情或其他违反国家法律的信息，天津市社会保险基金管理中心个人网厅网站的系统记录有可能作为用户违反法律的证据。<br> <strong>第十条 保障</strong><br> &emsp;&emsp;用户同意保障和维护天津市社会保险基金管理中心个人网厅网站全体成员的利益，负责支付由用户使用超出服务范围引起的律师费用，违反服务条款的损害补偿费用等。<br> <strong>第十一条 结束服务</strong><br> &emsp;&emsp;用户或天津市社会保险基金管理中心个人网厅网站可随时根据实际情况中断一项或多项网络服务。天津市社会保险基金管理中心个人网厅网站不需对任何个人或第三方负责而随时中断服务。用户对后来的条款修改有异议，或对天津市社会保险基金管理中心个人网厅网站的服务不满，可以行使如下权利：<br> (1)停止使用天津市社会保险基金管理中心个人网厅网站的网络服务。<br> (2)通告天津市社会保险基金管理中心个人网厅网站停止对该用户的服务。<br> 结束用户服务后，用户使用网络服务的权利马上中止。从那时起，用户没有权利，天津市社会保险基金管理中心个人网厅网站也没有义务传送任何未处理的信息或未完成的服务给用户或第三方。<br> <strong>第十二条 通告</strong><br> &emsp;&emsp;所有发给用户的通告都可通过重要页面的公告或电子邮件或常规的信件传送。服务条款的修改、服务变更、或其它重要事件的通告都会以此形式进行。<br> <strong>第十三条 网络服务内容的所有权</strong><br> &emsp;&emsp;天津市社会保险基金管理中心个人网厅网站定义的网络服务内容包括：文字、软件、图片、图表中的全部内容；电子邮件或短信的全部内容；天津市社会保险基金管理中心个人网厅网站为用户提供的其他信息。所有这些内容受版权、商标、标签和其它财产所有权法律的保护。所以，用户只能在天津市社会保险基金管理中心个人网厅网站授权下才能使用这些内容，而不能擅自复制、再造这些内容、或创造与内容有关的派生产品。天津市社会保险基金管理中心个人网厅网站所有的内容版权归天津市社会保险基金管理中心个人网厅网站所有，任何人需要转载必须征得天津市社会保险基金管理中心个人网厅网站授权。<br> <strong>第十四条 法律</strong><br> &emsp;&emsp;网络服务条款要与中华人民共和国的法律解释相一致，用户和天津市社会保险基金管理中心个人网厅网站一致同意服从法院所有管辖。如发生天津市社会保险基金管理中心个人网厅网站服务条款与中华人民共和国法律相抵触时，则这些条款将完全按法律规定重新解释，而其它条款则依旧保持对用户产生法律效力和影响。 <p></p> </span> </div> <div style="font-size: 25px;font-family: 楷体;text-align: center"> <p style="font-size: large; color: red"><input type="checkbox" name="checkAgree" data-ng-model="checkBox">本人同意上述内容，接受社会保险网上经办服务并承担相应的风险与责任。</p> <br> <div class="P_L_t_text_color hand"> <button class="P_L_t_text_color hand" data-ng-click="goToRegiste()">前 往 注 册</button> </div> </div> <br><br><br> </div>'),a.put("modules/person/views/login.html",'<div class="L_bag"> <div class="L_three"> <div class="L_t_right"> <form ng-submit="loginSystem(loginForm)" name="loginForm" id="loginForm"> <div class="L_o_text">账号登录（个人服务）</div> <div class="L_t_text"> <div class="L_T_adright"> <input class="L_t_input" name="username" id="username" autofocus data-ng-model="personcredentials.idNum" required type="text" placeholder="证件号码"> </div> </div> <div class="L_t_text"> <div class="L_T_adright"> <input class="L_t_input" name="password" type="password" id="inputPassword" data-ng-model="personcredentials.password" data-ng-minlength="6" required placeholder="请输入密码"> </div> </div> <div class="L_t_text"> <div class="L_T_adright2"> <input type="hidden" id="captchaId" name="captchaId" value="{{personcredentials.captchaId}}"> <input type="text" id="captchaWord" name="captchaWord" class="L_t_input" data-ng-model="personcredentials.captchaWord" data-ng-minlength="4" data-ng-maxlength="4" required placeholder="点击图片更换验证码"> </div> <div class="L_t_Code"> <img id="captchaImage" ng-src="{{personcaptchaUrl}}" data-ng-click="persongetCaptcha()" width="84" height="40" alt="验证码"> </div> </div> <button type="submit" class="L_t_text_color hand">登 录 系 统</button> <div class="other_login"> <div class="other_login_title"> <span class="line"></span> <span class="txt">使用其他账号登录</span> <span class="line"></span> </div> <a href="http://175.174.62.1:8081/uaa/idstools/getGssionid/person" class="link_btn2" target="_self"></a> </div> </form> </div> </div> </div> <div class="L_twofg" style="border-bottom:#d4d4d4 1px solid;height:10px"></div>'),a.put("modules/person/views/password.html",'<div style="background:#f6f6f6"> <div class="P_L_cen_right" style="margin-top:-60px;margin-right:180px"> <div class="P_L_ceb_R01 hand"><a href="#/personlogin" class="P_L_ceb_R01 hand">登 录</a></div> <div class="P_L_ceb_R02 hand"><a href="#/personRegister" class="P_L_ceb_R02 hand">注 册</a></div> </div> <div class="P_L_twobg"> <form name="resetForm" id="resetForm"> <div class="P_L_register" style="height:480px"> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>姓名：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" autofocus class="L_I_input" id="name" ng-model="passWordResetDetailDTO.name" name="name" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.name.$dirty && resetForm.name.$invalid]" style="line-height:34px">请输入您的姓名。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>证件号码：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" id="idNumber" ng-model="passWordResetDetailDTO.idNumber" data-ng-pattern="/(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/" name="idNumber" required type="text"> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.idNumber.$dirty && resetForm.idNumber.$invalid]" style="line-height:34px">请输入18位有效证件号码。 </div> </div> </div> <div class="P_L_T_input" ng-repeat="ql in questionList"> <div class="P_L_I_left"><span>*</span>问题{{$index+1}}：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_label" ng-model="ql.answer" placeholder="{{ql.content}}"> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>图形验证码：</div> <div class="P_L_I_Cen03"> <input type="hidden" id="captchaId" name="captchaId" value="{{captcha.captchaId}}"> <input type="text" style="width: 220px" id="captchaWord" name="captchaWord" class="P_L_t_input" data-ng-model="captcha.captchaWord" required placeholder="点击图片更换验证码" style="width: 90px"> </div> <div class="L_t_Code"> <span> <img style="margin-left:70%" id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="80" height="30" alt="验证码"></span> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>手机验证码：</div> <div class="P_L_I_Cen"> <input class="P_L_I_input2" name="validateMobileNumber" ng-model="passWordResetDetailDTO.captcha" required type="text"> <div class="P_L_I_buttom"> <div class="P_L_I_Green hand"> <input id="btnPSendCode" class="P_L_I_Green hand" value="发送验证码" data-ng-click="passwordCtrlMessage()" ng-disabled="resetForm.mobilenumber.$invalid"> </div> </div> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.validateMobileNumber.$dirty && resetForm.validateMobileNumber.$invalid]" style="line-height:34px">请输入您接收到的验证码。 </div> </div> </div> <div class="P_L_T_input" style="height:auto"> <div class="P_L_I_left" style="height:auto"></div> <div class="P_L_I_Cen" style="margin-left:200px;height:auto;width:500px"> <span style="color:red; font-size:13px" class="ng-binding">{{pwmobilenumbermsg}}</span> </div> <div class="P_L_I_Right" style="height:auto"> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>设置密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" name="newPassword" type="password" ng-model="passWordResetDetailDTO.newPassword" data-ng-minlength="6" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[resetForm.newPassword.$dirty && resetForm.newPassword.$invalid]" style="line-height:34px"> 请设置密码，8位及以上包含数字和字母。 </div> </div> </div> <div class="P_L_T_input" style="height:2px" ng-show="pwmobilenumbermsg"></div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>确认密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" ng-model="confirmPassword" name="confirmpassword" type="password" girder-valid-password="passWordResetDetailDTO.newPassword" required> </div> <div class="P_L_I_Right"> <div id="confirmPassword" class="P_L_zc_ts" ng-class="{true: \'P_L_zc_tr\'}[resetForm.confirmpassword.$dirty&&(resetForm.confirmpassword.$error._required||resetForm.confirmpassword.$error.notEqual)]"> 请再次输入新密码，进行密码确认；请确保两次输入的密码一致。 </div> </div> </div> <div class="L_T_input" style="height:15px"></div> <div class="P_L_t_text_color2 hand" data-ng-click="resetLoginPassword()">重&nbsp;&nbsp;置&nbsp;&nbsp;密&nbsp;&nbsp;码</div> </div> </form> </div> </div> '),a.put("modules/person/views/password_view.html",'<div class="P_L_top" style="background:none"> </div> <div class="P_L_twofg"> <div class="P_R_pic">恭喜您！密码修改成功。</div> <div class="P_L_T_input" style="margin:0 auto"> <div class="P_L_I_Cen" style="border:0;  width:50%"> <div class="P_L_ceb_R01 hand" style="float:right"><a href="#/personlogin" class="P_L_ceb_R01 hand">登 录</a> </div> </div> <div class="P_L_I_Right">返回登录页面</div><br><br><br> </div> </div>'),
a.put("modules/person/views/register.html",'<div style="background:#f6f6f6"> <div class="P_L_cen_right" style="margin-top:-60px;margin-right:180px"> <div class="P_L_ceb_R01 hand"><a href="#/personlogin" class="P_L_ceb_R01 hand">登 录</a></div> <div class="P_L_ceb_R02 hand"><a href="#/personPassword" class="P_L_ceb_R02 hand">重置密码</a></div> </div> <div class="P_L_twobg"> <form name="registerForm" id="registerForm"> <div class="P_L_register" style="height:auto"> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>注册人姓名：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" autofocus class="L_I_input" id="name" ng-model="tjPersonUserDTO.name" name="name" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.name.$dirty && registerForm.name.$invalid]" style="line-height:34px">请填写注册人姓名。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>证件号码：</div> <div class="P_L_I_Cen01"> <input class="P_L_I_input" id="idNumber" data-ng-pattern="/(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/" ng-model="tjPersonUserDTO.idNumber" ng-blur="checkCardNum();" name="idNumber" type="text" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.idNumber.$dirty && registerForm.idNumber.$invalid]" style="line-height:34px">请输入18位有效证件号码。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>图形验证码：</div> <div class="P_L_I_Cen03"> <input type="hidden" id="captchaId" name="captchaId" value="{{captcha.captchaId}}"> <input type="text" style="width: 220px" id="captchaWord" name="captchaWord" class="P_L_t_input" data-ng-model="captcha.captchaWord" required placeholder="点击图片更换验证码" style="width: 90px"> </div> <div class="L_t_Code"> <span> <img style="margin-left:70%" id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="80" height="30" alt="验证码"></span> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>手机号码：</div> <div class="P_L_I_Cen02"> <input class="P_L_I_input" name="mobilenumber" id="MobileNumber" onkeyup="value=value.replace(/[^\\d]/g,\'\')" data-ng-model="MobileInfo.mobilenumber" required data-ng-maxlength="11" data-ng-minlength="11" type="text"> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.mobilenumber.$dirty &&registerForm.mobilenumber.$invalid]" style="line-height:36px">手机号码为必输项且应为11位数字。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>手机验证码：</div> <div class="P_L_I_Cen"> <input class="P_L_I_input2" name="validateMobileNumber" data-ng-model="MobileInfo.captcha" required type="text"> <div class="P_L_I_buttom"> <input id="btnPSendCode" value="发送验证码" data-ng-click="passwordCtrlMessage()" ng-disabled="registerForm.mobilenumber.$invalid" class="P_L_I_Green hand"> </div> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.validateMobileNumber.$dirty && registerForm.validateMobileNumber.$invalid]" style="line-height:36px">请输入您接收到的验证码。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>设置密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" name="password" id="registerInputPassword" type="password" ng-model="tjPersonUserDTO.password" data-ng-minlength="6" required> </div> <div class="P_L_I_Right"> <div ng-class="{true: \'P_L_zc_tr\', false: \'P_L_zc_ts\'}[registerForm.password.$dirty && registerForm.password.$invalid]" style="line-height:34px"> 请设置密码，8位及以上包含数字和字母。 </div> </div> </div> <div class="P_L_T_input"> <div class="P_L_I_left"><span>*</span>重复密码：</div> <div class="P_L_I_Cen03"> <input class="P_L_I_input" name="confirmpassword" girder-valid-password="tjPersonUserDTO.password" ng-model="confirmPassword" type="password" required> </div> <div class="P_L_I_Right"> <div id="confirmPassword" class="P_L_zc_ts" ng-class="{true: \'P_L_zc_tr\'}[registerForm.confirmpassword.$dirty&&(registerForm.confirmpassword.$error._required||registerForm.confirmpassword.$error.notEqual)]"> 请再次输入新密码，进行密码确认；请确保两次输入的密码一致。 </div> </div> </div> <div class="P_L_t_text_color2 hand" style="margin: 20px auto" data-ng-click="registeredUser()">注册 </div> </div> </form> </div> </div> '),a.put("modules/person/views/register_view.html",'<div class="P_L_top" style="background:none"> </div> <div class="P_L_twofg"> <div class="P_R_pic">恭喜您！注册成功。</div> <div class="P_L_T_input" style="margin:0 auto"> <div class="P_L_I_Cen" style="border:0;  width:50%"> <div class="P_L_ceb_R01 hand" style="float:right"> <button onclick="window.location.href=\'#/personlogin\'" class="P_L_ceb_R01 hand">登 录</button> </div> </div> <div class="P_L_I_Right">返回登录页面</div> <br><br><br> </div> </div> '),a.put("modules/resident/views/login.html"," "),a.put("modules/school/views/login.html",'<div class="L_bag"> <div class="L_three_siagent"> <div class="L_t_left"></div> <div class="L_t_right"> <form name="loginForm" id="loginForm" ng-submit="loginSystem(loginForm)"> <div class="L_o_text">欢迎登录</div> <div class="fg" style="height:20px"></div> <div class="L_t_text"> <div class="L_T_admin">用户名：</div> <div class="L_T_adright"> <input class="L_t_input" name="username" id="username" autofocus data-ng-model="credentials.username" required type="text"> </div> </div> <div class="L_t_text"> <div class="L_T_admin">密 码：</div> <div class="L_T_adright"> <input class="L_t_input" name="password" type="password" id="inputPassword" data-ng-model="credentials.password" required> </div> </div> <div class="L_t_text"> <div class="L_T_admin">验证码：</div> <div class="L_T_adright2"> <input type="hidden" id="captchaId" name="captchaId" value="{{credentials.captchaId}}"> <input type="text" id="captchaWord" name="captchaWord" class="L_t_input" data-ng-model="credentials.captchaWord" data-ng-minlength="4" data-ng-maxlength="4" required placeholder="点击图片更换验证码" style="width:90px"> </div> <div class="L_t_Code"> <span> <img id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="80" height="35" alt="验证码"></span> </div> </div> <div class="fg" style="height:20px"></div> <button type="submit" class="L_t_text_color hand" style="margin-left: 15%">登 录 系 统</button> </form> </div> </div> </div> <div class="L_twofg" style="border-bottom:#d4d4d4 1px solid;height:10px"></div> <div class="P_L_twofg"> <div class="P_L_twoleft" style="width:auto"> 建议使用Google Chrome 浏览器（Chrome 49.0及以上版本）、Internet Explorer 浏览器（IE 11稳定版本）、搜狗浏览器（急速模式）、360浏览器（极速模式）访问系统。 <span style="color:red">Chrome 49.0及以上版本 <a style="bold" href="https://www.google.cn/intl/zh-CN/chrome/">点击下载；</a> <span style="color:red">IE11浏览器 <a style="bold" href="https://www.microsoft.com/zh-cn/windows/">点击下载；</a> <span style="color:red">搜狗浏览器 <a style="bold" href="https://ie.sogou.com//">点击下载；</a> <span style="color:red">360浏览器 <a style="bold" href="https://browser.360.cn/ee/">点击下载；</a> <div>版权所有：南宁市人力资源和社会保障局</div> </span></span></span></span></div> </div>'),a.put("modules/siagent/views/active.html"," "),a.put("modules/siagent/views/login.html"," "),a.put("modules/siagent/views/password.html"," "),a.put("modules/support/template/401.html",'<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title>Not Authorized</title> <style> ::-moz-selection {\r\n            background: #b3d4fc;\r\n            text-shadow: none;\r\n        }\r\n\r\n        ::selection {\r\n            background: #b3d4fc;\r\n            text-shadow: none;\r\n        }\r\n\r\n        html {\r\n            padding: 30px 10px;\r\n            font-size: 20px;\r\n            line-height: 1.4;\r\n            color: #737373;\r\n            background: #f0f0f0;\r\n            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\r\n            -webkit-text-size-adjust: 100%;\r\n            -ms-text-size-adjust: 100%;\r\n        }\r\n\r\n        body {\r\n            max-width: 550px;\r\n            _width: 550px;\r\n            padding: 30px 20px 50px;\r\n            border: 1px solid #b3b3b3;\r\n            border-radius: 4px;\r\n            margin: 0 auto;\r\n            box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\r\n            background: #fcfcfc;\r\n        }\r\n\r\n        h1 {\r\n            margin: 0 10px;\r\n            font-size: 50px;\r\n            text-align: center;\r\n        }\r\n\r\n        h1 span {\r\n            color: #bbb;\r\n        }\r\n\r\n        h3 {\r\n            margin: 1.5em 0 0.5em;\r\n        }\r\n\r\n        p {\r\n            margin: 1em 0;\r\n        }\r\n\r\n        ul {\r\n            padding: 0 0 0 40px;\r\n            margin: 1em 0;\r\n        }\r\n\r\n        .container {\r\n            max-width: 500px;\r\n            _width: 500px;\r\n            margin: 0 auto;\r\n        } </style> </head> <body> <div class="container"> <h1>没有授权</h1> <p>对不起，您没有被授予权限查看当前页面.</p> </div> </body> </html> '),a.put("modules/support/template/404.html",'<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title>Page Not Found</title> <style> ::-moz-selection {\r\n            background: #b3d4fc;\r\n            text-shadow: none;\r\n        }\r\n\r\n        ::selection {\r\n            background: #b3d4fc;\r\n            text-shadow: none;\r\n        }\r\n\r\n        html {\r\n            padding: 30px 10px;\r\n            font-size: 20px;\r\n            line-height: 1.4;\r\n            color: #737373;\r\n            background: #f0f0f0;\r\n            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\r\n            -webkit-text-size-adjust: 100%;\r\n            -ms-text-size-adjust: 100%;\r\n        }\r\n\r\n        body {\r\n            max-width: 550px;\r\n            _width: 550px;\r\n            padding: 30px 20px 50px;\r\n            border: 1px solid #b3b3b3;\r\n            border-radius: 4px;\r\n            margin: 0 auto;\r\n            box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\r\n            background: #fcfcfc;\r\n        }\r\n\r\n        h1 {\r\n            margin: 0 10px;\r\n            font-size: 50px;\r\n            text-align: center;\r\n        }\r\n\r\n        h1 span {\r\n            color: #bbb;\r\n        }\r\n\r\n        h3 {\r\n            margin: 1.5em 0 0.5em;\r\n        }\r\n\r\n        p {\r\n            margin: 1em 0;\r\n        }\r\n\r\n        ul {\r\n            padding: 0 0 0 40px;\r\n            margin: 1em 0;\r\n        }\r\n\r\n        .container {\r\n            max-width: 500px;\r\n            _width: 500px;\r\n            margin: 0 auto;\r\n        } </style> </head> <body> <div class="container"> <h1>资源没有找到 <span>:(</span></h1> <p>对不起，您尝试查阅的内容不存在.</p> </div> </body> </html> '),a.put("modules/support/template/500.html",'<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title>Server Error</title> <style> ::-moz-selection {\r\n            background: #b3d4fc;\r\n            text-shadow: none;\r\n        }\r\n\r\n        ::selection {\r\n            background: #b3d4fc;\r\n            text-shadow: none;\r\n        }\r\n\r\n        html {\r\n            padding: 30px 10px;\r\n            font-size: 20px;\r\n            line-height: 1.4;\r\n            color: #737373;\r\n            background: #f0f0f0;\r\n            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\r\n            -webkit-text-size-adjust: 100%;\r\n            -ms-text-size-adjust: 100%;\r\n        }\r\n\r\n        body {\r\n            max-width: 550px;\r\n            _width: 550px;\r\n            padding: 30px 20px 50px;\r\n            border: 1px solid #b3b3b3;\r\n            border-radius: 4px;\r\n            margin: 0 auto;\r\n            box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\r\n            background: #fcfcfc;\r\n        }\r\n\r\n        h1 {\r\n            margin: 0 10px;\r\n            font-size: 50px;\r\n            text-align: center;\r\n        }\r\n\r\n        h1 span {\r\n            color: #bbb;\r\n        }\r\n\r\n        h3 {\r\n            margin: 1.5em 0 0.5em;\r\n        }\r\n\r\n        p {\r\n            margin: 1em 0;\r\n        }\r\n\r\n        ul {\r\n            padding: 0 0 0 40px;\r\n            margin: 1em 0;\r\n        }\r\n\r\n        .container {\r\n            max-width: 500px;\r\n            _width: 500px;\r\n            margin: 0 auto;\r\n        } </style> </head> <body> <div class="container"> <h1>服务端错误</h1> <p>对不起，服务端出现错误阻止当前页的显示.</p> </div> </body> </html> '),a.put("modules/support/template/messageview.html",'<div class="modal-header btn-primary"> <h3>{{modalOptions.headerText}}</h3> </div> <div class="modal-body"> <p>{{modalOptions.bodyText}}</p> </div> <div class="modal-footer"> <button type="button" class="btn" data-ng-click="modalOptions.close()" data-ng-show="modalOptions.closeButtonText">{{modalOptions.closeButtonText}}</button> <button class="btn btn-success" data-ng-click="modalOptions.ok();">{{modalOptions.actionButtonText}}</button> </div>'),a.put("modules/uic/views/login.html",'<div class="L_bag"> <div class="L_three"> <div class="L_t_left"></div> <div class="L_t_right"> <form name="loginForm" id="loginForm" action="api/enterprise/usernamepassword/login" method="post"> <div class="L_o_text">欢迎登录</div> <div class="fg" style="height:20px"></div> <div class="L_t_text"> <div class="L_T_admin">用户名：</div> <div class="L_T_adright"> <input class="L_t_input" name="username" id="username" autofocus data-ng-model="credentials.username" required type="text"> </div> </div> <div class="L_t_text"> <div class="L_T_admin">密 码：</div> <div class="L_T_adright"> <input class="L_t_input" name="password" type="password" id="inputPassword" data-ng-model="credentials.password" data-ng-minlength="6" required> </div> </div> <div class="L_t_text"> <div class="L_T_admin">验证码：</div> <div class="L_T_adright2"> <input type="hidden" id="captchaId" name="captchaId" value="{{credentials.captchaId}}"> <input type="text" id="captchaWord" name="captchaWord" class="L_t_input" data-ng-model="credentials.captchaWord" data-ng-minlength="4" data-ng-maxlength="4" required placeholder="点击图片更换验证码" style="width:90px"> </div> <div class="L_t_Code"> <span> <img id="captchaImage" ng-src="{{captchaUrl}}" data-ng-click="getCaptcha()" width="80" height="35" alt="验证码"></span> </div> </div> <div class="fg" style="height:20px"></div> <button type="submit" class="L_t_text_color hand" style="margin-left: 15%" ng-disabled="loginForm.$invalid">登 录 系 统</button> </form> </div> </div> </div> <div class="L_twofg" style="border-bottom:#d4d4d4 1px solid"></div>')}]);